(()=>{"use strict";var t,r={4852:(t,r,e)=>{e.d(r,{T:()=>n,Y:()=>i});var s=e(8830);class i{constructor(t,r){this.x=t,this.y=r}norm(){return Math.sqrt(this.x*this.x+this.y+this.y)}centering(t){return new i(this.x-t.x,this.y-t.y)}rotate(t){const[r,e]=[Math.cos(t),Math.sin(t)];return new i(this.x*r-this.y*e,this.x*e+this.y*r)}toVector3(){return new s.P(this.x,0,this.y)}}function n(t){return new i(t.x,t.z)}},5953:(t,r,e)=>{e.d(r,{l:()=>i});var s=e(8139);class i{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}i.Instances=new Array,i.OnEnginesDisposedObservable=new s.y$,i._LastCreatedScene=null,i.UseFallbackTexture=!0,i.FallbackTexture=""},1716:(t,r,e)=>{e.d(r,{Z:()=>s});class s{static SetMatrixPrecision(t){if(s.MatrixTrackPrecisionChange=!1,t&&!s.MatrixUse64Bits&&s.MatrixTrackedMatrices)for(let t=0;t<s.MatrixTrackedMatrices.length;++t){const r=s.MatrixTrackedMatrices[t],e=r._m;r._m=new Array(16);for(let t=0;t<16;++t)r._m[t]=e[t]}s.MatrixUse64Bits=t,s.MatrixCurrentType=s.MatrixUse64Bits?Array:Float32Array,s.MatrixTrackedMatrices=null}}s.MatrixUse64Bits=!1,s.MatrixTrackPrecisionChange=!0,s.MatrixCurrentType=Float32Array,s.MatrixTrackedMatrices=[]},5241:(t,r,e)=>{e.d(r,{RD:()=>o,T:()=>s});var s,i,n=e(5412);!function(t){t[t.LOCAL=0]="LOCAL",t[t.WORLD=1]="WORLD",t[t.BONE=2]="BONE"}(s||(s={}));class o{}o.X=new n.P(1,0,0),o.Y=new n.P(0,1,0),o.Z=new n.P(0,0,1),function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(i||(i={}))},2922:(t,r,e)=>{e.d(r,{HE:()=>l,Wo:()=>u,zZ:()=>y});var s=e(1226),i=e(4551),n=e(2554),o=e(646);function a(t){return Math.pow(t,i.Nn)}function h(t){return t<=.04045?.0773993808*t:Math.pow(.947867299*(t+.055),2.4)}function c(t){return Math.pow(t,i.zp)}function _(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class u{constructor(t=0,r=0,e=0){this.r=t,this.g=r,this.b=e}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let t=255*this.r|0;return t=397*t^(255*this.g|0),t=397*t^(255*this.b|0),t}toArray(t,r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,this}fromArray(t,r=0){return u.FromArrayToRef(t,r,this),this}toColor4(t=1){return new l(this.r,this.g,this.b,t)}asArray(){return[this.r,this.g,this.b]}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(t){return new u(this.r*t.r,this.g*t.g,this.b*t.b)}multiplyToRef(t,r){return r.r=this.r*t.r,r.g=this.g*t.g,r.b=this.b*t.b,this}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b}equalsFloats(t,r,e){return this.r===t&&this.g===r&&this.b===e}scale(t){return new u(this.r*t,this.g*t,this.b*t)}scaleInPlace(t){return this.r*=t,this.g*=t,this.b*=t,this}scaleToRef(t,r){return r.r=this.r*t,r.g=this.g*t,r.b=this.b*t,this}scaleAndAddToRef(t,r){return r.r+=this.r*t,r.g+=this.g*t,r.b+=this.b*t,this}clampToRef(t=0,r=1,e){return e.r=s.R.Clamp(this.r,t,r),e.g=s.R.Clamp(this.g,t,r),e.b=s.R.Clamp(this.b,t,r),this}add(t){return new u(this.r+t.r,this.g+t.g,this.b+t.b)}addToRef(t,r){return r.r=this.r+t.r,r.g=this.g+t.g,r.b=this.b+t.b,this}subtract(t){return new u(this.r-t.r,this.g-t.g,this.b-t.b)}subtractToRef(t,r){return r.r=this.r-t.r,r.g=this.g-t.g,r.b=this.b-t.b,this}clone(){return new u(this.r,this.g,this.b)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyFromFloats(t,r,e){return this.r=t,this.g=r,this.b=e,this}set(t,r,e){return this.copyFromFloats(t,r,e)}toHexString(){const t=Math.round(255*this.r),r=Math.round(255*this.g),e=Math.round(255*this.b);return"#"+s.R.ToHex(t)+s.R.ToHex(r)+s.R.ToHex(e)}toHSV(){const t=new u;return this.toHSVToRef(t),t}toHSVToRef(t){const r=this.r,e=this.g,s=this.b,i=Math.max(r,e,s),n=Math.min(r,e,s);let o=0,a=0;const h=i,c=i-n;0!==i&&(a=c/i),i!=n&&(i==r?(o=(e-s)/c,e<s&&(o+=6)):i==e?o=(s-r)/c+2:i==s&&(o=(r-e)/c+4),o*=60),t.r=o,t.g=a,t.b=h}toLinearSpace(t=!1){const r=new u;return this.toLinearSpaceToRef(r,t),r}toLinearSpaceToRef(t,r=!1){return r?(t.r=h(this.r),t.g=h(this.g),t.b=h(this.b)):(t.r=a(this.r),t.g=a(this.g),t.b=a(this.b)),this}toGammaSpace(t=!1){const r=new u;return this.toGammaSpaceToRef(r,t),r}toGammaSpaceToRef(t,r=!1){return r?(t.r=_(this.r),t.g=_(this.g),t.b=_(this.b)):(t.r=c(this.r),t.g=c(this.g),t.b=c(this.b)),this}static HSVtoRGBToRef(t,r,e,s){const i=e*r,n=t/60,o=i*(1-Math.abs(n%2-1));let a=0,h=0,c=0;n>=0&&n<=1?(a=i,h=o):n>=1&&n<=2?(a=o,h=i):n>=2&&n<=3?(h=i,c=o):n>=3&&n<=4?(h=o,c=i):n>=4&&n<=5?(a=o,c=i):n>=5&&n<=6&&(a=i,c=o);const _=e-i;s.set(a+_,h+_,c+_)}static FromHSV(t,r,e){const s=new u(0,0,0);return u.HSVtoRGBToRef(t,r,e,s),s}static FromHexString(t){if("#"!==t.substring(0,1)||7!==t.length)return new u(0,0,0);const r=parseInt(t.substring(1,3),16),e=parseInt(t.substring(3,5),16),s=parseInt(t.substring(5,7),16);return u.FromInts(r,e,s)}static FromArray(t,r=0){return new u(t[r],t[r+1],t[r+2])}static FromArrayToRef(t,r=0,e){e.r=t[r],e.g=t[r+1],e.b=t[r+2]}static FromInts(t,r,e){return new u(t/255,r/255,e/255)}static Lerp(t,r,e){const s=new u(0,0,0);return u.LerpToRef(t,r,e,s),s}static LerpToRef(t,r,e,s){s.r=t.r+(r.r-t.r)*e,s.g=t.g+(r.g-t.g)*e,s.b=t.b+(r.b-t.b)*e}static Hermite(t,r,e,s,i){const n=i*i,o=i*n,a=2*o-3*n+1,h=-2*o+3*n,c=o-2*n+i,_=o-n,l=t.r*a+e.r*h+r.r*c+s.r*_,y=t.g*a+e.g*h+r.g*c+s.g*_,m=t.b*a+e.b*h+r.b*c+s.b*_;return new u(l,y,m)}static Hermite1stDerivative(t,r,e,s,i){const n=u.Black();return this.Hermite1stDerivativeToRef(t,r,e,s,i,n),n}static Hermite1stDerivativeToRef(t,r,e,s,i,n){const o=i*i;n.r=6*(o-i)*t.r+(3*o-4*i+1)*r.r+6*(-o+i)*e.r+(3*o-2*i)*s.r,n.g=6*(o-i)*t.g+(3*o-4*i+1)*r.g+6*(-o+i)*e.g+(3*o-2*i)*s.g,n.b=6*(o-i)*t.b+(3*o-4*i+1)*r.b+6*(-o+i)*e.b+(3*o-2*i)*s.b}static Red(){return new u(1,0,0)}static Green(){return new u(0,1,0)}static Blue(){return new u(0,0,1)}static Black(){return new u(0,0,0)}static get BlackReadOnly(){return u._BlackReadOnly}static White(){return new u(1,1,1)}static Purple(){return new u(.5,0,.5)}static Magenta(){return new u(1,0,1)}static Yellow(){return new u(1,1,0)}static Gray(){return new u(.5,.5,.5)}static Teal(){return new u(0,1,1)}static Random(){return new u(Math.random(),Math.random(),Math.random())}}u._BlackReadOnly=u.Black();class l{constructor(t=0,r=0,e=0,s=1){this.r=t,this.g=r,this.b=e,this.a=s}addInPlace(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}asArray(){return[this.r,this.g,this.b,this.a]}toArray(t,r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t[r+3]=this.a,this}fromArray(t,r=0){return l.FromArrayToRef(t,r,this),this}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}add(t){return new l(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}subtract(t){return new l(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}subtractToRef(t,r){return r.r=this.r-t.r,r.g=this.g-t.g,r.b=this.b-t.b,r.a=this.a-t.a,this}scale(t){return new l(this.r*t,this.g*t,this.b*t,this.a*t)}scaleInPlace(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}scaleToRef(t,r){return r.r=this.r*t,r.g=this.g*t,r.b=this.b*t,r.a=this.a*t,this}scaleAndAddToRef(t,r){return r.r+=this.r*t,r.g+=this.g*t,r.b+=this.b*t,r.a+=this.a*t,this}clampToRef(t=0,r=1,e){return e.r=s.R.Clamp(this.r,t,r),e.g=s.R.Clamp(this.g,t,r),e.b=s.R.Clamp(this.b,t,r),e.a=s.R.Clamp(this.a,t,r),this}multiply(t){return new l(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)}multiplyToRef(t,r){return r.r=this.r*t.r,r.g=this.g*t.g,r.b=this.b*t.b,r.a=this.a*t.a,r}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let t=255*this.r|0;return t=397*t^(255*this.g|0),t=397*t^(255*this.b|0),t=397*t^(255*this.a|0),t}clone(){return new l(this.r,this.g,this.b,this.a)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}copyFromFloats(t,r,e,s){return this.r=t,this.g=r,this.b=e,this.a=s,this}set(t,r,e,s){return this.copyFromFloats(t,r,e,s)}toHexString(t=!1){const r=Math.round(255*this.r),e=Math.round(255*this.g),i=Math.round(255*this.b);if(t)return"#"+s.R.ToHex(r)+s.R.ToHex(e)+s.R.ToHex(i);const n=Math.round(255*this.a);return"#"+s.R.ToHex(r)+s.R.ToHex(e)+s.R.ToHex(i)+s.R.ToHex(n)}toLinearSpace(t=!1){const r=new l;return this.toLinearSpaceToRef(r,t),r}toLinearSpaceToRef(t,r=!1){return r?(t.r=h(this.r),t.g=h(this.g),t.b=h(this.b)):(t.r=a(this.r),t.g=a(this.g),t.b=a(this.b)),t.a=this.a,this}toGammaSpace(t=!1){const r=new l;return this.toGammaSpaceToRef(r,t),r}toGammaSpaceToRef(t,r=!1){return r?(t.r=_(this.r),t.g=_(this.g),t.b=_(this.b)):(t.r=c(this.r),t.g=c(this.g),t.b=c(this.b)),t.a=this.a,this}static FromHexString(t){if("#"!==t.substring(0,1)||9!==t.length&&7!==t.length)return new l(0,0,0,0);const r=parseInt(t.substring(1,3),16),e=parseInt(t.substring(3,5),16),s=parseInt(t.substring(5,7),16),i=9===t.length?parseInt(t.substring(7,9),16):255;return l.FromInts(r,e,s,i)}static Lerp(t,r,e){const s=new l(0,0,0,0);return l.LerpToRef(t,r,e,s),s}static LerpToRef(t,r,e,s){s.r=t.r+(r.r-t.r)*e,s.g=t.g+(r.g-t.g)*e,s.b=t.b+(r.b-t.b)*e,s.a=t.a+(r.a-t.a)*e}static Hermite(t,r,e,s,i){const n=i*i,o=i*n,a=2*o-3*n+1,h=-2*o+3*n,c=o-2*n+i,_=o-n,u=t.r*a+e.r*h+r.r*c+s.r*_,y=t.g*a+e.g*h+r.g*c+s.g*_,m=t.b*a+e.b*h+r.b*c+s.b*_,d=t.a*a+e.a*h+r.a*c+s.a*_;return new l(u,y,m,d)}static Hermite1stDerivative(t,r,e,s,i){const n=new l;return this.Hermite1stDerivativeToRef(t,r,e,s,i,n),n}static Hermite1stDerivativeToRef(t,r,e,s,i,n){const o=i*i;n.r=6*(o-i)*t.r+(3*o-4*i+1)*r.r+6*(-o+i)*e.r+(3*o-2*i)*s.r,n.g=6*(o-i)*t.g+(3*o-4*i+1)*r.g+6*(-o+i)*e.g+(3*o-2*i)*s.g,n.b=6*(o-i)*t.b+(3*o-4*i+1)*r.b+6*(-o+i)*e.b+(3*o-2*i)*s.b,n.a=6*(o-i)*t.a+(3*o-4*i+1)*r.a+6*(-o+i)*e.a+(3*o-2*i)*s.a}static FromColor3(t,r=1){return new l(t.r,t.g,t.b,r)}static FromArray(t,r=0){return new l(t[r],t[r+1],t[r+2],t[r+3])}static FromArrayToRef(t,r=0,e){e.r=t[r],e.g=t[r+1],e.b=t[r+2],e.a=t[r+3]}static FromInts(t,r,e,s){return new l(t/255,r/255,e/255,s/255)}static CheckColors4(t,r){if(t.length===3*r){const r=[];for(let e=0;e<t.length;e+=3){const s=e/3*4;r[s]=t[e],r[s+1]=t[e+1],r[s+2]=t[e+2],r[s+3]=1}return r}return t}}class y{}y.Color3=n.B.BuildArray(3,u.Black),y.Color4=n.B.BuildArray(3,(()=>new l(0,0,0,0))),(0,o.H)("BABYLON.Color3",u),(0,o.H)("BABYLON.Color4",l)},4551:(t,r,e)=>{e.d(r,{Nn:()=>i,Q_:()=>n,kn:()=>o,zp:()=>s});const s=1/2.2,i=2.2,n=(1+Math.sqrt(5))/2,o=.001},8952:(t,r,e)=>{e.d(r,{i:()=>i});var s=e(6504);class i{static GetPlanes(t){const r=[];for(let t=0;t<6;t++)r.push(new s.J(0,0,0,0));return i.GetPlanesToRef(t,r),r}static GetNearPlaneToRef(t,r){const e=t.m;r.normal.x=e[3]+e[2],r.normal.y=e[7]+e[6],r.normal.z=e[11]+e[10],r.d=e[15]+e[14],r.normalize()}static GetFarPlaneToRef(t,r){const e=t.m;r.normal.x=e[3]-e[2],r.normal.y=e[7]-e[6],r.normal.z=e[11]-e[10],r.d=e[15]-e[14],r.normalize()}static GetLeftPlaneToRef(t,r){const e=t.m;r.normal.x=e[3]+e[0],r.normal.y=e[7]+e[4],r.normal.z=e[11]+e[8],r.d=e[15]+e[12],r.normalize()}static GetRightPlaneToRef(t,r){const e=t.m;r.normal.x=e[3]-e[0],r.normal.y=e[7]-e[4],r.normal.z=e[11]-e[8],r.d=e[15]-e[12],r.normalize()}static GetTopPlaneToRef(t,r){const e=t.m;r.normal.x=e[3]-e[1],r.normal.y=e[7]-e[5],r.normal.z=e[11]-e[9],r.d=e[15]-e[13],r.normalize()}static GetBottomPlaneToRef(t,r){const e=t.m;r.normal.x=e[3]+e[1],r.normal.y=e[7]+e[5],r.normal.z=e[11]+e[9],r.d=e[15]+e[13],r.normalize()}static GetPlanesToRef(t,r){i.GetNearPlaneToRef(t,r[0]),i.GetFarPlaneToRef(t,r[1]),i.GetLeftPlaneToRef(t,r[2]),i.GetRightPlaneToRef(t,r[3]),i.GetTopPlaneToRef(t,r[4]),i.GetBottomPlaneToRef(t,r[5])}}},8830:(t,r,e)=>{e.d(r,{RD:()=>s.RD,Wo:()=>i.Wo,HE:()=>i.HE,$B:()=>n.$B,T:()=>s.T,P:()=>o.P,Lt:()=>o.Lt});var s=e(5241),i=e(2922),n=(e(4551),e(8952),e(3118)),o=(e(6504),e(3321),e(5412));e(470)},3118:(t,r,e)=>{e.d(r,{$B:()=>_,ZZ:()=>c});var s,i=e(1226),n=e(5412),o=e(4551);!function(t){t[t.CW=0]="CW",t[t.CCW=1]="CCW"}(s||(s={}));class a{constructor(t){this._radians=t,this._radians<0&&(this._radians+=2*Math.PI)}degrees(){return 180*this._radians/Math.PI}radians(){return this._radians}static BetweenTwoPoints(t,r){const e=r.subtract(t),s=Math.atan2(e.y,e.x);return new a(s)}static FromRadians(t){return new a(t)}static FromDegrees(t){return new a(t*Math.PI/180)}}class h{constructor(t,r,e){this.startPoint=t,this.midPoint=r,this.endPoint=e;const i=Math.pow(r.x,2)+Math.pow(r.y,2),o=(Math.pow(t.x,2)+Math.pow(t.y,2)-i)/2,h=(i-Math.pow(e.x,2)-Math.pow(e.y,2))/2,c=(t.x-r.x)*(r.y-e.y)-(r.x-e.x)*(t.y-r.y);this.centerPoint=new n.FM((o*(r.y-e.y)-h*(t.y-r.y))/c,((t.x-r.x)*h-(r.x-e.x)*o)/c),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=a.BetweenTwoPoints(this.centerPoint,this.startPoint);const _=this.startAngle.degrees();let u=a.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),l=a.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();u-_>180&&(u-=360),u-_<-180&&(u+=360),l-u>180&&(l-=360),l-u<-180&&(l+=360),this.orientation=u-_<0?s.CW:s.CCW,this.angle=a.FromDegrees(this.orientation===s.CW?_-l:l-_)}}class c{constructor(t,r){this._points=new Array,this._length=0,this.closed=!1,this._points.push(new n.FM(t,r))}addLineTo(t,r){if(this.closed)return this;const e=new n.FM(t,r),s=this._points[this._points.length-1];return this._points.push(e),this._length+=e.subtract(s).length(),this}addArcTo(t,r,e,i,o=36){if(this.closed)return this;const a=this._points[this._points.length-1],c=new n.FM(t,r),_=new n.FM(e,i),u=new h(a,c,_);let l=u.angle.radians()/o;u.orientation===s.CW&&(l*=-1);let y=u.startAngle.radians()+l;for(let t=0;t<o;t++){const t=Math.cos(y)*u.radius+u.centerPoint.x,r=Math.sin(y)*u.radius+u.centerPoint.y;this.addLineTo(t,r),y+=l}return this}close(){return this.closed=!0,this}length(){let t=this._length;if(this.closed){const r=this._points[this._points.length-1];t+=this._points[0].subtract(r).length()}return t}getPoints(){return this._points}getPointAtLengthPosition(t){if(t<0||t>1)return n.FM.Zero();const r=t*this.length();let e=0;for(let t=0;t<this._points.length;t++){const s=(t+1)%this._points.length,i=this._points[t],o=this._points[s].subtract(i),a=o.length()+e;if(r>=e&&r<=a){const t=o.normalize(),s=r-e;return new n.FM(i.x+t.x*s,i.y+t.y*s)}e=a}return n.FM.Zero()}static StartingAt(t,r){return new c(t,r)}}class _{constructor(t,r=null,e,s=!1){this.path=t,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array,this._pointAtData={id:0,point:n.P.Zero(),previousPointArrayIndex:0,position:0,subPosition:0,interpolateReady:!1,interpolationMatrix:n.y3.Identity()};for(let r=0;r<t.length;r++)this._curve[r]=t[r].clone();this._raw=e||!1,this._alignTangentsWithPath=s,this._compute(r,s)}getCurve(){return this._curve}getPoints(){return this._curve}length(){return this._distances[this._distances.length-1]}getTangents(){return this._tangents}getNormals(){return this._normals}getBinormals(){return this._binormals}getDistances(){return this._distances}getPointAt(t){return this._updatePointAtData(t).point}getTangentAt(t,r=!1){return this._updatePointAtData(t,r),r?n.P.TransformCoordinates(n.P.Forward(),this._pointAtData.interpolationMatrix):this._tangents[this._pointAtData.previousPointArrayIndex]}getNormalAt(t,r=!1){return this._updatePointAtData(t,r),r?n.P.TransformCoordinates(n.P.Right(),this._pointAtData.interpolationMatrix):this._normals[this._pointAtData.previousPointArrayIndex]}getBinormalAt(t,r=!1){return this._updatePointAtData(t,r),r?n.P.TransformCoordinates(n.P.UpReadOnly,this._pointAtData.interpolationMatrix):this._binormals[this._pointAtData.previousPointArrayIndex]}getDistanceAt(t){return this.length()*t}getPreviousPointIndexAt(t){return this._updatePointAtData(t),this._pointAtData.previousPointArrayIndex}getSubPositionAt(t){return this._updatePointAtData(t),this._pointAtData.subPosition}getClosestPositionTo(t){let r=Number.MAX_VALUE,e=0;for(let s=0;s<this._curve.length-1;s++){const i=this._curve[s+0],o=this._curve[s+1].subtract(i).normalize(),a=this._distances[s+1]-this._distances[s+0],h=Math.min(Math.max(n.P.Dot(o,t.subtract(i).normalize()),0)*n.P.Distance(i,t)/a,1),c=n.P.Distance(i.add(o.scale(h*a)),t);c<r&&(r=c,e=(this._distances[s+0]+a*h)/this.length())}return e}slice(t=0,r=1){if(t<0&&(t=1- -1*t%1),r<0&&(r=1- -1*r%1),t>r){const e=t;t=r,r=e}const e=this.getCurve(),s=this.getPointAt(t);let i=this.getPreviousPointIndexAt(t);const n=this.getPointAt(r),o=this.getPreviousPointIndexAt(r)+1,a=[];return 0!==t&&(i++,a.push(s)),a.push(...e.slice(i,o)),1===r&&1!==t||a.push(n),new _(a,this.getNormalAt(t),this._raw,this._alignTangentsWithPath)}update(t,r=null,e=!1){for(let r=0;r<t.length;r++)this._curve[r].x=t[r].x,this._curve[r].y=t[r].y,this._curve[r].z=t[r].z;return this._compute(r,e),this}_compute(t,r=!1){const e=this._curve.length;if(e<2)return;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[e-1]=this._curve[e-1].subtract(this._curve[e-2]),this._raw||this._tangents[e-1].normalize();const s=this._tangents[0],i=this._normalVector(s,t);let o,a,h,c,_;this._normals[0]=i,this._raw||this._normals[0].normalize(),this._binormals[0]=n.P.Cross(s,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(let t=1;t<e;t++)o=this._getLastNonNullVector(t),t<e-1&&(a=this._getFirstNonNullVector(t),this._tangents[t]=r?a:o.add(a),this._tangents[t].normalize()),this._distances[t]=this._distances[t-1]+this._curve[t].subtract(this._curve[t-1]).length(),h=this._tangents[t],_=this._binormals[t-1],this._normals[t]=n.P.Cross(_,h),this._raw||(0===this._normals[t].length()?(c=this._normals[t-1],this._normals[t]=c.clone()):this._normals[t].normalize()),this._binormals[t]=n.P.Cross(h,this._normals[t]),this._raw||this._binormals[t].normalize();this._pointAtData.id=NaN}_getFirstNonNullVector(t){let r=1,e=this._curve[t+r].subtract(this._curve[t]);for(;0===e.length()&&t+r+1<this._curve.length;)r++,e=this._curve[t+r].subtract(this._curve[t]);return e}_getLastNonNullVector(t){let r=1,e=this._curve[t].subtract(this._curve[t-r]);for(;0===e.length()&&t>r+1;)r++,e=this._curve[t].subtract(this._curve[t-r]);return e}_normalVector(t,r){let e,s=t.length();if(0===s&&(s=1),null==r){let r;r=i.R.WithinEpsilon(Math.abs(t.y)/s,1,o.kn)?i.R.WithinEpsilon(Math.abs(t.x)/s,1,o.kn)?i.R.WithinEpsilon(Math.abs(t.z)/s,1,o.kn)?n.P.Zero():new n.P(0,0,1):new n.P(1,0,0):new n.P(0,-1,0),e=n.P.Cross(t,r)}else e=n.P.Cross(t,r),n.P.CrossToRef(e,t,e);return e.normalize(),e}_updatePointAtData(t,r=!1){if(this._pointAtData.id===t)return this._pointAtData.interpolateReady||this._updateInterpolationMatrix(),this._pointAtData;this._pointAtData.id=t;const e=this.getPoints();if(t<=0)return this._setPointAtData(0,0,e[0],0,r);if(t>=1)return this._setPointAtData(1,1,e[e.length-1],e.length-1,r);let s,i=e[0],o=0;const a=t*this.length();for(let h=1;h<e.length;h++){s=e[h];const c=n.P.Distance(i,s);if(o+=c,o===a)return this._setPointAtData(t,1,s,h,r);if(o>a){const e=(o-a)/c,n=i.subtract(s),_=s.add(n.scaleInPlace(e));return this._setPointAtData(t,1-e,_,h-1,r)}i=s}return this._pointAtData}_setPointAtData(t,r,e,s,i){return this._pointAtData.point=e,this._pointAtData.position=t,this._pointAtData.subPosition=r,this._pointAtData.previousPointArrayIndex=s,this._pointAtData.interpolateReady=i,i&&this._updateInterpolationMatrix(),this._pointAtData}_updateInterpolationMatrix(){this._pointAtData.interpolationMatrix=n.y3.Identity();const t=this._pointAtData.previousPointArrayIndex;if(t!==this._tangents.length-1){const r=t+1,e=this._tangents[t].clone(),s=this._normals[t].clone(),i=this._binormals[t].clone(),o=this._tangents[r].clone(),a=this._normals[r].clone(),h=this._binormals[r].clone(),c=n._f.RotationQuaternionFromAxis(s,i,e),_=n._f.RotationQuaternionFromAxis(a,h,o);n._f.Slerp(c,_,this._pointAtData.subPosition).toRotationMatrix(this._pointAtData.interpolationMatrix)}}}},6504:(t,r,e)=>{e.d(r,{J:()=>i});var s=e(5412);class i{constructor(t,r,e,i){this.normal=new s.P(t,r,e),this.d=i}asArray(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new i(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let t=this.normal.getHashCode();return t=397*t^(0|this.d),t}normalize(){const t=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let r=0;return 0!==t&&(r=1/t),this.normal.x*=r,this.normal.y*=r,this.normal.z*=r,this.d*=r,this}transform(t){const r=i._TmpMatrix;t.invertToRef(r);const e=r.m,s=this.normal.x,n=this.normal.y,o=this.normal.z,a=this.d,h=s*e[0]+n*e[1]+o*e[2]+a*e[3],c=s*e[4]+n*e[5]+o*e[6]+a*e[7],_=s*e[8]+n*e[9]+o*e[10]+a*e[11],u=s*e[12]+n*e[13]+o*e[14]+a*e[15];return new i(h,c,_,u)}dotCoordinate(t){return this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z+this.d}copyFromPoints(t,r,e){const s=r.x-t.x,i=r.y-t.y,n=r.z-t.z,o=e.x-t.x,a=e.y-t.y,h=e.z-t.z,c=i*h-n*a,_=n*o-s*h,u=s*a-i*o,l=Math.sqrt(c*c+_*_+u*u);let y;return y=0!==l?1/l:0,this.normal.x=c*y,this.normal.y=_*y,this.normal.z=u*y,this.d=-(this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z),this}isFrontFacingTo(t,r){return s.P.Dot(this.normal,t)<=r}signedDistanceTo(t){return s.P.Dot(t,this.normal)+this.d}static FromArray(t){return new i(t[0],t[1],t[2],t[3])}static FromPoints(t,r,e){const s=new i(0,0,0,0);return s.copyFromPoints(t,r,e),s}static FromPositionAndNormal(t,r){const e=new i(0,0,0,0);return r.normalize(),e.normal=r,e.d=-(r.x*t.x+r.y*t.y+r.z*t.z),e}static SignedDistanceToPlaneFromPositionAndNormal(t,r,e){const i=-(r.x*t.x+r.y*t.y+r.z*t.z);return s.P.Dot(e,r)+i}}i._TmpMatrix=s.y3.Identity()},1226:(t,r,e)=>{e.d(r,{R:()=>s});class s{static WithinEpsilon(t,r,e=1401298e-51){return Math.abs(t-r)<=e}static ToHex(t){const r=t.toString(16);return t<=15?("0"+r).toUpperCase():r.toUpperCase()}static Sign(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1}static Clamp(t,r=0,e=1){return Math.min(e,Math.max(r,t))}static Log2(t){return Math.log(t)*Math.LOG2E}static ILog2(t){if(Math.log2)return Math.floor(Math.log2(t));if(t<0)return NaN;if(0===t)return-1/0;let r=0;if(t<1){for(;t<1;)r++,t*=2;r=-r}else if(t>1)for(;t>1;)r++,t=Math.floor(t/2);return r}static Repeat(t,r){return t-Math.floor(t/r)*r}static Normalize(t,r,e){return(t-r)/(e-r)}static Denormalize(t,r,e){return t*(e-r)+r}static DeltaAngle(t,r){let e=s.Repeat(r-t,360);return e>180&&(e-=360),e}static PingPong(t,r){const e=s.Repeat(t,2*r);return r-Math.abs(e-r)}static SmoothStep(t,r,e){let i=s.Clamp(e);return i=-2*i*i*i+3*i*i,r*i+t*(1-i)}static MoveTowards(t,r,e){let i=0;return i=Math.abs(r-t)<=e?r:t+s.Sign(r-t)*e,i}static MoveTowardsAngle(t,r,e){const i=s.DeltaAngle(t,r);let n=0;return-e<i&&i<e?n=r:(r=t+i,n=s.MoveTowards(t,r,e)),n}static Lerp(t,r,e){return t+(r-t)*e}static LerpAngle(t,r,e){let i=s.Repeat(r-t,360);return i>180&&(i-=360),t+i*s.Clamp(e)}static InverseLerp(t,r,e){let i=0;return i=t!=r?s.Clamp((e-t)/(r-t)):0,i}static Hermite(t,r,e,s,i){const n=i*i,o=i*n;return t*(2*o-3*n+1)+e*(-2*o+3*n)+r*(o-2*n+i)+s*(o-n)}static Hermite1stDerivative(t,r,e,s,i){const n=i*i;return 6*(n-i)*t+(3*n-4*i+1)*r+6*(-n+i)*e+(3*n-2*i)*s}static RandomRange(t,r){return t===r?t:Math.random()*(r-t)+t}static RangeToPercent(t,r,e){return(t-r)/(e-r)}static PercentToRange(t,r,e){return(e-r)*t+r}static NormalizeRadians(t){return t-s.TwoPi*Math.floor((t+Math.PI)/s.TwoPi)}static HCF(t,r){const e=t%r;return 0===e?r:s.HCF(r,e)}}s.TwoPi=2*Math.PI},3321:(t,r,e)=>{e.d(r,{$:()=>s});class s{constructor(t,r){this.width=t,this.height=r}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let t=0|this.width;return t=397*t^(0|this.height),t}copyFrom(t){this.width=t.width,this.height=t.height}copyFromFloats(t,r){return this.width=t,this.height=r,this}set(t,r){return this.copyFromFloats(t,r)}multiplyByFloats(t,r){return new s(this.width*t,this.height*r)}clone(){return new s(this.width,this.height)}equals(t){return!!t&&this.width===t.width&&this.height===t.height}get surface(){return this.width*this.height}static Zero(){return new s(0,0)}add(t){return new s(this.width+t.width,this.height+t.height)}subtract(t){return new s(this.width-t.width,this.height-t.height)}static Lerp(t,r,e){const i=t.width+(r.width-t.width)*e,n=t.height+(r.height-t.height)*e;return new s(i,n)}}},5412:(t,r,e)=>{e.d(r,{FM:()=>_,Lt:()=>l,P:()=>u,_f:()=>y,jp:()=>x,y3:()=>m});var s=e(1226),i=e(4551),n=e(2554),o=e(646),a=e(1716),h=e(5953);const c=t=>parseInt(t.toString().replace(/\W/g,""));class _{constructor(t=0,r=0){this.x=t,this.y=r}toString(){return`{X: ${this.x} Y: ${this.y}}`}getClassName(){return"Vector2"}getHashCode(){let t=c(this.x);return t=397*t^c(this.y),t}toArray(t,r=0){return t[r]=this.x,t[r+1]=this.y,this}fromArray(t,r=0){return _.FromArrayToRef(t,r,this),this}asArray(){const t=new Array;return this.toArray(t,0),t}copyFrom(t){return this.x=t.x,this.y=t.y,this}copyFromFloats(t,r){return this.x=t,this.y=r,this}set(t,r){return this.copyFromFloats(t,r)}add(t){return new this.constructor(this.x+t.x,this.y+t.y)}addToRef(t,r){return r.x=this.x+t.x,r.y=this.y+t.y,r}addInPlace(t){return this.x+=t.x,this.y+=t.y,this}addVector3(t){return new this.constructor(this.x+t.x,this.y+t.y)}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y)}subtractToRef(t,r){return r.x=this.x-t.x,r.y=this.y-t.y,r}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this}multiply(t){return new this.constructor(this.x*t.x,this.y*t.y)}multiplyToRef(t,r){return r.x=this.x*t.x,r.y=this.y*t.y,r}multiplyByFloats(t,r){return new this.constructor(this.x*t,this.y*r)}divide(t){return new this.constructor(this.x/t.x,this.y/t.y)}divideToRef(t,r){return r.x=this.x/t.x,r.y=this.y/t.y,r}divideInPlace(t){return this.divideToRef(t,this)}negate(){return new this.constructor(-this.x,-this.y)}negateInPlace(){return this.x*=-1,this.y*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y)}scaleInPlace(t){return this.x*=t,this.y*=t,this}scale(t){const r=new this.constructor(0,0);return this.scaleToRef(t,r),r}scaleToRef(t,r){return r.x=this.x*t,r.y=this.y*t,r}scaleAndAddToRef(t,r){return r.x+=this.x*t,r.y+=this.y*t,r}equals(t){return t&&this.x===t.x&&this.y===t.y}equalsWithEpsilon(t,r=i.kn){return t&&s.R.WithinEpsilon(this.x,t.x,r)&&s.R.WithinEpsilon(this.y,t.y,r)}floor(){return new this.constructor(Math.floor(this.x),Math.floor(this.y))}fract(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}rotateToRef(t,r){const e=Math.cos(t),s=Math.sin(t);return r.x=e*this.x-s*this.y,r.y=s*this.x+e*this.y,r}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return _.NormalizeToRef(this,this),this}clone(){return new this.constructor(this.x,this.y)}static Zero(){return new _(0,0)}static One(){return new _(1,1)}static Random(t=0,r=1){return new _(s.R.RandomRange(t,r),s.R.RandomRange(t,r))}static get ZeroReadOnly(){return _._ZeroReadOnly}static FromArray(t,r=0){return new _(t[r],t[r+1])}static FromArrayToRef(t,r,e){return e.x=t[r],e.y=t[r+1],e}static CatmullRom(t,r,e,s,i){const n=i*i,o=i*n,a=.5*(2*r.x+(-t.x+e.x)*i+(2*t.x-5*r.x+4*e.x-s.x)*n+(-t.x+3*r.x-3*e.x+s.x)*o),h=.5*(2*r.y+(-t.y+e.y)*i+(2*t.y-5*r.y+4*e.y-s.y)*n+(-t.y+3*r.y-3*e.y+s.y)*o);return new t.constructor(a,h)}static Clamp(t,r,e){let s=t.x;s=s>e.x?e.x:s,s=s<r.x?r.x:s;let i=t.y;return i=i>e.y?e.y:i,i=i<r.y?r.y:i,new t.constructor(s,i)}static Hermite(t,r,e,s,i){const n=i*i,o=i*n,a=2*o-3*n+1,h=-2*o+3*n,c=o-2*n+i,_=o-n,u=t.x*a+e.x*h+r.x*c+s.x*_,l=t.y*a+e.y*h+r.y*c+s.y*_;return new t.constructor(u,l)}static Hermite1stDerivative(t,r,e,s,i){const n=new t.constructor;return this.Hermite1stDerivativeToRef(t,r,e,s,i,n),n}static Hermite1stDerivativeToRef(t,r,e,s,i,n){const o=i*i;return n.x=6*(o-i)*t.x+(3*o-4*i+1)*r.x+6*(-o+i)*e.x+(3*o-2*i)*s.x,n.y=6*(o-i)*t.y+(3*o-4*i+1)*r.y+6*(-o+i)*e.y+(3*o-2*i)*s.y,n}static Lerp(t,r,e){const s=t.x+(r.x-t.x)*e,i=t.y+(r.y-t.y)*e;return new t.constructor(s,i)}static Dot(t,r){return t.x*r.x+t.y*r.y}static Normalize(t){const r=new t.constructor;return this.NormalizeToRef(t,r),r}static NormalizeToRef(t,r){const e=t.length();return 0===e||(r.x=t.x/e,r.y=t.y/e),r}static Minimize(t,r){const e=t.x<r.x?t.x:r.x,s=t.y<r.y?t.y:r.y;return new t.constructor(e,s)}static Maximize(t,r){const e=t.x>r.x?t.x:r.x,s=t.y>r.y?t.y:r.y;return new t.constructor(e,s)}static Transform(t,r){const e=new t.constructor;return _.TransformToRef(t,r,e),e}static TransformToRef(t,r,e){const s=r.m,i=t.x*s[0]+t.y*s[4]+s[12],n=t.x*s[1]+t.y*s[5]+s[13];return e.x=i,e.y=n,e}static PointInTriangle(t,r,e,s){const i=.5*(-e.y*s.x+r.y*(-e.x+s.x)+r.x*(e.y-s.y)+e.x*s.y),n=i<0?-1:1,o=(r.y*s.x-r.x*s.y+(s.y-r.y)*t.x+(r.x-s.x)*t.y)*n,a=(r.x*e.y-r.y*e.x+(r.y-e.y)*t.x+(e.x-r.x)*t.y)*n;return o>0&&a>0&&o+a<2*i*n}static Distance(t,r){return Math.sqrt(_.DistanceSquared(t,r))}static DistanceSquared(t,r){const e=t.x-r.x,s=t.y-r.y;return e*e+s*s}static Center(t,r){const e=new t.constructor;return _.CenterToRef(t,r,e)}static CenterToRef(t,r,e){return e.copyFromFloats((t.x+r.x)/2,(t.y+r.y)/2)}static DistanceOfPointFromSegment(t,r,e){const s=_.DistanceSquared(r,e);if(0===s)return _.Distance(t,r);const i=e.subtract(r),n=Math.max(0,Math.min(1,_.Dot(t.subtract(r),i)/s)),o=r.add(i.multiplyByFloats(n,n));return _.Distance(t,o)}}_._ZeroReadOnly=_.Zero();class u{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}constructor(t=0,r=0,e=0){this._isDirty=!0,this._x=t,this._y=r,this._z=e}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z}}`}getClassName(){return"Vector3"}getHashCode(){let t=c(this._x);return t=397*t^c(this._y),t=397*t^c(this._z),t}asArray(){const t=[];return this.toArray(t,0),t}toArray(t,r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,this}fromArray(t,r=0){return u.FromArrayToRef(t,r,this),this}toQuaternion(){return y.RotationYawPitchRoll(this._y,this._x,this._z)}addInPlace(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)}addInPlaceFromFloats(t,r,e){return this._x+=t,this._y+=r,this._z+=e,this._isDirty=!0,this}add(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z)}addToRef(t,r){return r.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._isDirty=!0,this}subtract(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z)}subtractToRef(t,r){return this.subtractFromFloatsToRef(t._x,t._y,t._z,r)}subtractFromFloats(t,r,e){return new this.constructor(this._x-t,this._y-r,this._z-e)}subtractFromFloatsToRef(t,r,e,s){return s.copyFromFloats(this._x-t,this._y-r,this._z-e)}negate(){return new this.constructor(-this._x,-this._y,-this._z)}negateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}negateToRef(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._isDirty=!0,this}scale(t){return new this.constructor(this._x*t,this._y*t,this._z*t)}scaleToRef(t,r){return r.copyFromFloats(this._x*t,this._y*t,this._z*t)}getNormalToRef(t){const r=this.length();let e=Math.acos(this.y/r);const s=Math.atan2(this.z,this.x);e>Math.PI/2?e-=Math.PI/2:e+=Math.PI/2;const i=r*Math.sin(e)*Math.cos(s),n=r*Math.cos(e),o=r*Math.sin(e)*Math.sin(s);return t.set(i,n,o),t}applyRotationQuaternionToRef(t,r){const e=t._w*this._x+t._y*this._z-t._z*this._y,s=t._w*this._y+t._z*this._x-t._x*this._z,i=t._w*this._z+t._x*this._y-t._y*this._x,n=-t._x*this._x-t._y*this._y-t._z*this._z;return r._x=e*t._w+n*-t._x+s*-t._z-i*-t._y,r._y=s*t._w+n*-t._y+i*-t._x-e*-t._z,r._z=i*t._w+n*-t._z+e*-t._y-s*-t._x,r._isDirty=!0,r}applyRotationQuaternionInPlace(t){return this.applyRotationQuaternionToRef(t,this)}applyRotationQuaternion(t){return this.applyRotationQuaternionToRef(t,new this.constructor)}scaleAndAddToRef(t,r){return r.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)}projectOnPlane(t,r){const e=new this.constructor;return this.projectOnPlaneToRef(t,r,e),e}projectOnPlaneToRef(t,r,e){const s=t.normal,i=t.d,n=d.Vector3[0];this.subtractToRef(r,n),n.normalize();const o=u.Dot(n,s);if(Math.abs(o)<Math.pow(10,-10))e.setAll(1/0);else{const t=-(u.Dot(r,s)+i)/o,a=n.scaleInPlace(t);r.addToRef(a,e)}return e}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z}equalsWithEpsilon(t,r=i.kn){return t&&s.R.WithinEpsilon(this._x,t._x,r)&&s.R.WithinEpsilon(this._y,t._y,r)&&s.R.WithinEpsilon(this._z,t._z,r)}equalsToFloats(t,r,e){return this._x===t&&this._y===r&&this._z===e}multiplyInPlace(t){return this._x*=t._x,this._y*=t._y,this._z*=t._z,this._isDirty=!0,this}multiply(t){return this.multiplyByFloats(t._x,t._y,t._z)}multiplyToRef(t,r){return r.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)}multiplyByFloats(t,r,e){return new this.constructor(this._x*t,this._y*r,this._z*e)}divide(t){return new this.constructor(this._x/t._x,this._y/t._y,this._z/t._z)}divideToRef(t,r){return r.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)}minimizeInPlaceFromFloats(t,r,e){return t<this._x&&(this.x=t),r<this._y&&(this.y=r),e<this._z&&(this.z=e),this}maximizeInPlaceFromFloats(t,r,e){return t>this._x&&(this.x=t),r>this._y&&(this.y=r),e>this._z&&(this.z=e),this}isNonUniformWithinEpsilon(t){const r=Math.abs(this._x),e=Math.abs(this._y);if(!s.R.WithinEpsilon(r,e,t))return!0;const i=Math.abs(this._z);return!s.R.WithinEpsilon(r,i,t)||!s.R.WithinEpsilon(e,i,t)}get isNonUniform(){const t=Math.abs(this._x);return t!==Math.abs(this._y)||t!==Math.abs(this._z)}floor(){return new this.constructor(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))}fract(){return new this.constructor(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z}get hasAZeroComponent(){return this._x*this._y*this._z==0}normalize(){return this.normalizeFromLength(this.length())}reorderInPlace(t){return"xyz"===(t=t.toLowerCase())||(d.Vector3[0].copyFrom(this),["x","y","z"].forEach(((r,e)=>{this[r]=d.Vector3[0][t[e]]}))),this}rotateByQuaternionToRef(t,r){return t.toRotationMatrix(d.Matrix[0]),u.TransformCoordinatesToRef(this,d.Matrix[0],r),r}rotateByQuaternionAroundPointToRef(t,r,e){return this.subtractToRef(r,d.Vector3[0]),d.Vector3[0].rotateByQuaternionToRef(t,d.Vector3[0]),r.addToRef(d.Vector3[0],e),e}cross(t){const r=new this.constructor;return u.CrossToRef(this,t,r)}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new this.constructor(0,0,0);return this.normalizeToRef(t),t}normalizeToRef(t){const r=this.length();return 0===r||1===r?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/r,t)}clone(){return new this.constructor(this._x,this._y,this._z)}copyFrom(t){return this.copyFromFloats(t._x,t._y,t._z)}copyFromFloats(t,r,e){return this._x=t,this._y=r,this._z=e,this._isDirty=!0,this}set(t,r,e){return this.copyFromFloats(t,r,e)}setAll(t){return this._x=this._y=this._z=t,this._isDirty=!0,this}static GetClipFactor(t,r,e,s){const i=u.Dot(t,e)-s;return i/(i-(u.Dot(r,e)-s))}static GetAngleBetweenVectors(t,r,e){const i=t.normalizeToRef(d.Vector3[1]),n=r.normalizeToRef(d.Vector3[2]);let o=u.Dot(i,n);o=s.R.Clamp(o,-1,1);const a=Math.acos(o),h=d.Vector3[3];return u.CrossToRef(i,n,h),u.Dot(h,e)>0?isNaN(a)?0:a:isNaN(a)?-Math.PI:-Math.acos(o)}static GetAngleBetweenVectorsOnPlane(t,r,e){d.Vector3[0].copyFrom(t);const i=d.Vector3[0];d.Vector3[1].copyFrom(r);const n=d.Vector3[1];d.Vector3[2].copyFrom(e);const o=d.Vector3[2],a=d.Vector3[3],h=d.Vector3[4];i.normalize(),n.normalize(),o.normalize(),u.CrossToRef(o,i,a),u.CrossToRef(a,o,h);const c=Math.atan2(u.Dot(n,a),u.Dot(n,h));return s.R.NormalizeRadians(c)}static PitchYawRollToMoveBetweenPointsToRef(t,r,e){const s=x.Vector3[0];return r.subtractToRef(t,s),e._y=Math.atan2(s.x,s.z)||0,e._x=Math.atan2(Math.sqrt(s.x**2+s.z**2),s.y)||0,e._z=0,e._isDirty=!0,e}static PitchYawRollToMoveBetweenPoints(t,r){const e=u.Zero();return u.PitchYawRollToMoveBetweenPointsToRef(t,r,e)}static SlerpToRef(t,r,e,n){e=s.R.Clamp(e,0,1);const o=d.Vector3[0],a=d.Vector3[1];o.copyFrom(t);const h=o.length();o.normalizeFromLength(h),a.copyFrom(r);const c=a.length();a.normalizeFromLength(c);const _=u.Dot(o,a);let l,y;if(_<1-i.kn){const t=Math.acos(_),r=1/Math.sin(t);l=Math.sin((1-e)*t)*r,y=Math.sin(e*t)*r}else l=1-e,y=e;return o.scaleInPlace(l),a.scaleInPlace(y),n.copyFrom(o).addInPlace(a),n.scaleInPlace(s.R.Lerp(h,c,e)),n}static SmoothToRef(t,r,e,s,i){return u.SlerpToRef(t,r,0===s?1:e/s,i),i}static FromArray(t,r=0){return new u(t[r],t[r+1],t[r+2])}static FromFloatArray(t,r){return u.FromArray(t,r)}static FromArrayToRef(t,r,e){return e._x=t[r],e._y=t[r+1],e._z=t[r+2],e._isDirty=!0,e}static FromFloatArrayToRef(t,r,e){return u.FromArrayToRef(t,r,e)}static FromFloatsToRef(t,r,e,s){return s.copyFromFloats(t,r,e),s}static Zero(){return new u(0,0,0)}static One(){return new u(1,1,1)}static Up(){return new u(0,1,0)}static get UpReadOnly(){return u._UpReadOnly}static get DownReadOnly(){return u._DownReadOnly}static get RightReadOnly(){return u._RightReadOnly}static get LeftReadOnly(){return u._LeftReadOnly}static get LeftHandedForwardReadOnly(){return u._LeftHandedForwardReadOnly}static get RightHandedForwardReadOnly(){return u._RightHandedForwardReadOnly}static get LeftHandedBackwardReadOnly(){return u._LeftHandedBackwardReadOnly}static get RightHandedBackwardReadOnly(){return u._RightHandedBackwardReadOnly}static get ZeroReadOnly(){return u._ZeroReadOnly}static Down(){return new u(0,-1,0)}static Forward(t=!1){return new u(0,0,t?-1:1)}static Backward(t=!1){return new u(0,0,t?1:-1)}static Right(){return new u(1,0,0)}static Left(){return new u(-1,0,0)}static Random(t=0,r=1){return new u(s.R.RandomRange(t,r),s.R.RandomRange(t,r),s.R.RandomRange(t,r))}static TransformCoordinates(t,r){const e=u.Zero();return u.TransformCoordinatesToRef(t,r,e),e}static TransformCoordinatesToRef(t,r,e){return u.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,r,e),e}static TransformCoordinatesFromFloatsToRef(t,r,e,s,i){const n=s.m,o=t*n[0]+r*n[4]+e*n[8]+n[12],a=t*n[1]+r*n[5]+e*n[9]+n[13],h=t*n[2]+r*n[6]+e*n[10]+n[14],c=1/(t*n[3]+r*n[7]+e*n[11]+n[15]);return i._x=o*c,i._y=a*c,i._z=h*c,i._isDirty=!0,i}static TransformNormal(t,r){const e=u.Zero();return u.TransformNormalToRef(t,r,e),e}static TransformNormalToRef(t,r,e){return this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,r,e),e}static TransformNormalFromFloatsToRef(t,r,e,s,i){const n=s.m;return i._x=t*n[0]+r*n[4]+e*n[8],i._y=t*n[1]+r*n[5]+e*n[9],i._z=t*n[2]+r*n[6]+e*n[10],i._isDirty=!0,i}static CatmullRom(t,r,e,s,i){const n=i*i,o=i*n,a=.5*(2*r._x+(-t._x+e._x)*i+(2*t._x-5*r._x+4*e._x-s._x)*n+(-t._x+3*r._x-3*e._x+s._x)*o),h=.5*(2*r._y+(-t._y+e._y)*i+(2*t._y-5*r._y+4*e._y-s._y)*n+(-t._y+3*r._y-3*e._y+s._y)*o),c=.5*(2*r._z+(-t._z+e._z)*i+(2*t._z-5*r._z+4*e._z-s._z)*n+(-t._z+3*r._z-3*e._z+s._z)*o);return new t.constructor(a,h,c)}static Clamp(t,r,e){const s=new t.constructor;return u.ClampToRef(t,r,e,s),s}static ClampToRef(t,r,e,s){let i=t._x;i=i>e._x?e._x:i,i=i<r._x?r._x:i;let n=t._y;n=n>e._y?e._y:n,n=n<r._y?r._y:n;let o=t._z;return o=o>e._z?e._z:o,o=o<r._z?r._z:o,s.copyFromFloats(i,n,o),s}static CheckExtends(t,r,e){r.minimizeInPlace(t),e.maximizeInPlace(t)}static Hermite(t,r,e,s,i){const n=i*i,o=i*n,a=2*o-3*n+1,h=-2*o+3*n,c=o-2*n+i,_=o-n,u=t._x*a+e._x*h+r._x*c+s._x*_,l=t._y*a+e._y*h+r._y*c+s._y*_,y=t._z*a+e._z*h+r._z*c+s._z*_;return new t.constructor(u,l,y)}static Hermite1stDerivative(t,r,e,s,i){const n=new t.constructor;return this.Hermite1stDerivativeToRef(t,r,e,s,i,n),n}static Hermite1stDerivativeToRef(t,r,e,s,i,n){const o=i*i;return n._x=6*(o-i)*t._x+(3*o-4*i+1)*r._x+6*(-o+i)*e._x+(3*o-2*i)*s._x,n._y=6*(o-i)*t._y+(3*o-4*i+1)*r._y+6*(-o+i)*e._y+(3*o-2*i)*s._y,n._z=6*(o-i)*t._z+(3*o-4*i+1)*r._z+6*(-o+i)*e._z+(3*o-2*i)*s._z,n._isDirty=!0,n}static Lerp(t,r,e){const s=new t.constructor(0,0,0);return u.LerpToRef(t,r,e,s),s}static LerpToRef(t,r,e,s){return s._x=t._x+(r._x-t._x)*e,s._y=t._y+(r._y-t._y)*e,s._z=t._z+(r._z-t._z)*e,s._isDirty=!0,s}static Dot(t,r){return t._x*r._x+t._y*r._y+t._z*r._z}static Cross(t,r){const e=new t.constructor;return u.CrossToRef(t,r,e),e}static CrossToRef(t,r,e){const s=t._y*r._z-t._z*r._y,i=t._z*r._x-t._x*r._z,n=t._x*r._y-t._y*r._x;return e.copyFromFloats(s,i,n),e}static Normalize(t){const r=u.Zero();return u.NormalizeToRef(t,r),r}static NormalizeToRef(t,r){return t.normalizeToRef(r),r}static Project(t,r,e,s){const i=new t.constructor;return u.ProjectToRef(t,r,e,s,i),i}static ProjectToRef(t,r,e,s,i){const n=s.width,o=s.height,a=s.x,h=s.y,c=d.Matrix[1];m.FromValuesToRef(n/2,0,0,0,0,-o/2,0,0,0,0,.5,0,a+n/2,o/2+h,.5,1,c);const _=d.Matrix[0];return r.multiplyToRef(e,_),_.multiplyToRef(c,_),u.TransformCoordinatesToRef(t,_,i),i}static Reflect(t,r){return this.ReflectToRef(t,r,new u)}static ReflectToRef(t,r,e){const s=x.Vector3[0];return s.copyFrom(r).scaleInPlace(2*u.Dot(t,r)),e.copyFrom(t).subtractInPlace(s)}static _UnprojectFromInvertedMatrixToRef(t,r,e){u.TransformCoordinatesToRef(t,r,e);const i=r.m,n=t._x*i[3]+t._y*i[7]+t._z*i[11]+i[15];return s.R.WithinEpsilon(n,1)&&e.scaleInPlace(1/n),e}static UnprojectFromTransform(t,r,e,s,i){return this.Unproject(t,r,e,s,i,m.IdentityReadOnly)}static Unproject(t,r,e,s,i,n){const o=new t.constructor;return u.UnprojectToRef(t,r,e,s,i,n,o),o}static UnprojectToRef(t,r,e,s,i,n,o){return u.UnprojectFloatsToRef(t._x,t._y,t._z,r,e,s,i,n,o),o}static UnprojectFloatsToRef(t,r,e,s,i,n,o,a,c){var _;const l=d.Matrix[0];n.multiplyToRef(o,l),l.multiplyToRef(a,l),l.invert();const y=d.Vector3[0];return y.x=t/s*2-1,y.y=-(r/i*2-1),(null===(_=h.l.LastCreatedEngine)||void 0===_?void 0:_.isNDCHalfZRange)?y.z=e:y.z=2*e-1,u._UnprojectFromInvertedMatrixToRef(y,l,c),c}static Minimize(t,r){const e=new t.constructor;return e.copyFrom(t),e.minimizeInPlace(r),e}static Maximize(t,r){const e=new t.constructor;return e.copyFrom(t),e.maximizeInPlace(r),e}static Distance(t,r){return Math.sqrt(u.DistanceSquared(t,r))}static DistanceSquared(t,r){const e=t._x-r._x,s=t._y-r._y,i=t._z-r._z;return e*e+s*s+i*i}static ProjectOnTriangleToRef(t,r,e,n,o){const a=d.Vector3[0],h=d.Vector3[1],c=d.Vector3[2],_=d.Vector3[3],l=d.Vector3[4];e.subtractToRef(r,a),n.subtractToRef(r,h),n.subtractToRef(e,c);const y=a.length(),m=h.length(),x=c.length();if(y<i.kn||m<i.kn||x<i.kn)return o.copyFrom(r),u.Distance(t,r);t.subtractToRef(r,l),u.CrossToRef(a,h,_);const f=_.length();if(f<i.kn)return o.copyFrom(r),u.Distance(t,r);_.normalizeFromLength(f);let R=l.length();if(R<i.kn)return o.copyFrom(r),0;l.normalizeFromLength(R);const p=u.Dot(_,l),w=d.Vector3[5],g=d.Vector3[6];w.copyFrom(_).scaleInPlace(-R*p),g.copyFrom(t).addInPlace(w);const T=d.Vector3[4],z=d.Vector3[5],F=d.Vector3[7],M=d.Vector3[8];T.copyFrom(a).scaleInPlace(1/y),M.copyFrom(h).scaleInPlace(1/m),T.addInPlace(M).scaleInPlace(-1),z.copyFrom(a).scaleInPlace(-1/y),M.copyFrom(c).scaleInPlace(1/x),z.addInPlace(M).scaleInPlace(-1),F.copyFrom(c).scaleInPlace(-1/x),M.copyFrom(h).scaleInPlace(-1/m),F.addInPlace(M).scaleInPlace(-1);const b=d.Vector3[9];let P;b.copyFrom(g).subtractInPlace(r),u.CrossToRef(T,b,M),P=u.Dot(M,_);const A=P;b.copyFrom(g).subtractInPlace(e),u.CrossToRef(z,b,M),P=u.Dot(M,_);const I=P;b.copyFrom(g).subtractInPlace(n),u.CrossToRef(F,b,M),P=u.Dot(M,_);const v=P,D=d.Vector3[10];let C,V;A>0&&I<0?(D.copyFrom(a),C=r,V=e):I>0&&v<0?(D.copyFrom(c),C=e,V=n):(D.copyFrom(h).scaleInPlace(-1),C=n,V=r);const L=d.Vector3[9],k=d.Vector3[4];if(C.subtractToRef(g,M),V.subtractToRef(g,L),u.CrossToRef(M,L,k),!(u.Dot(k,_)<0))return o.copyFrom(g),Math.abs(R*p);const O=d.Vector3[5];u.CrossToRef(D,k,O),O.normalize();const H=d.Vector3[9];H.copyFrom(C).subtractInPlace(g);const S=H.length();if(S<i.kn)return o.copyFrom(C),u.Distance(t,C);H.normalizeFromLength(S);const B=u.Dot(O,H),N=d.Vector3[7];N.copyFrom(g).addInPlace(O.scaleInPlace(S*B)),M.copyFrom(N).subtractInPlace(C),R=D.length(),D.normalizeFromLength(R);let U=u.Dot(M,D)/Math.max(R,i.kn);return U=s.R.Clamp(U,0,1),N.copyFrom(C).addInPlace(D.scaleInPlace(U*R)),o.copyFrom(N),u.Distance(t,N)}static Center(t,r){return u.CenterToRef(t,r,u.Zero())}static CenterToRef(t,r,e){return e.copyFromFloats((t._x+r._x)/2,(t._y+r._y)/2,(t._z+r._z)/2)}static RotationFromAxis(t,r,e){const s=new t.constructor;return u.RotationFromAxisToRef(t,r,e,s),s}static RotationFromAxisToRef(t,r,e,s){const i=d.Quaternion[0];return y.RotationQuaternionFromAxisToRef(t,r,e,i),i.toEulerAnglesToRef(s),s}}u._UpReadOnly=u.Up(),u._DownReadOnly=u.Down(),u._LeftHandedForwardReadOnly=u.Forward(!1),u._RightHandedForwardReadOnly=u.Forward(!0),u._LeftHandedBackwardReadOnly=u.Backward(!1),u._RightHandedBackwardReadOnly=u.Backward(!0),u._RightReadOnly=u.Right(),u._LeftReadOnly=u.Left(),u._ZeroReadOnly=u.Zero();class l{constructor(t=0,r=0,e=0,s=0){this.x=t,this.y=r,this.z=e,this.w=s}toString(){return`{X: ${this.x} Y: ${this.y} Z: ${this.z} W: ${this.w}}`}getClassName(){return"Vector4"}getHashCode(){let t=c(this.x);return t=397*t^c(this.y),t=397*t^c(this.z),t=397*t^c(this.w),t}asArray(){const t=new Array;return this.toArray(t,0),t}toArray(t,r){return void 0===r&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,this}fromArray(t,r=0){return l.FromArrayToRef(t,r,this),this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}add(t){return new this.constructor(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addToRef(t,r){return r.x=this.x+t.x,r.y=this.y+t.y,r.z=this.z+t.z,r.w=this.w+t.w,r}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtract(t){return new this.constructor(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}subtractToRef(t,r){return r.x=this.x-t.x,r.y=this.y-t.y,r.z=this.z-t.z,r.w=this.w-t.w,r}subtractFromFloats(t,r,e,s){return new this.constructor(this.x-t,this.y-r,this.z-e,this.w-s)}subtractFromFloatsToRef(t,r,e,s,i){return i.x=this.x-t,i.y=this.y-r,i.z=this.z-e,i.w=this.w-s,i}negate(){return new this.constructor(-this.x,-this.y,-this.z,-this.w)}negateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scale(t){return new this.constructor(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,r){return r.x=this.x*t,r.y=this.y*t,r.z=this.z*t,r.w=this.w*t,r}scaleAndAddToRef(t,r){return r.x+=this.x*t,r.y+=this.y*t,r.z+=this.z*t,r.w+=this.w*t,r}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}equalsWithEpsilon(t,r=i.kn){return t&&s.R.WithinEpsilon(this.x,t.x,r)&&s.R.WithinEpsilon(this.y,t.y,r)&&s.R.WithinEpsilon(this.z,t.z,r)&&s.R.WithinEpsilon(this.w,t.w,r)}equalsToFloats(t,r,e,s){return this.x===t&&this.y===r&&this.z===e&&this.w===s}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiply(t){return new this.constructor(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}multiplyToRef(t,r){return r.x=this.x*t.x,r.y=this.y*t.y,r.z=this.z*t.z,r.w=this.w*t.w,r}multiplyByFloats(t,r,e,s){return new this.constructor(this.x*t,this.y*r,this.z*e,this.w*s)}divide(t){return new this.constructor(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}divideToRef(t,r){return r.x=this.x/t.x,r.y=this.y/t.y,r.z=this.z/t.z,r.w=this.w/t.w,r}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}maximizeInPlace(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}floor(){return new this.constructor(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new this.constructor(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){const t=this.length();return 0===t?this:this.scaleInPlace(1/t)}toVector3(){return new u(this.x,this.y,this.z)}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,r,e,s){return this.x=t,this.y=r,this.z=e,this.w=s,this}set(t,r,e,s){return this.copyFromFloats(t,r,e,s)}setAll(t){return this.x=this.y=this.z=this.w=t,this}static FromArray(t,r){return r||(r=0),new l(t[r],t[r+1],t[r+2],t[r+3])}static FromArrayToRef(t,r,e){return e.x=t[r],e.y=t[r+1],e.z=t[r+2],e.w=t[r+3],e}static FromFloatArrayToRef(t,r,e){return l.FromArrayToRef(t,r,e),e}static FromFloatsToRef(t,r,e,s,i){return i.x=t,i.y=r,i.z=e,i.w=s,i}static Zero(){return new l(0,0,0,0)}static One(){return new l(1,1,1,1)}static Random(t=0,r=1){return new l(s.R.RandomRange(t,r),s.R.RandomRange(t,r),s.R.RandomRange(t,r),s.R.RandomRange(t,r))}static get ZeroReadOnly(){return l._ZeroReadOnly}static Normalize(t){const r=l.Zero();return l.NormalizeToRef(t,r),r}static NormalizeToRef(t,r){return r.copyFrom(t),r.normalize(),r}static Minimize(t,r){const e=new t.constructor;return e.copyFrom(t),e.minimizeInPlace(r),e}static Maximize(t,r){const e=new t.constructor;return e.copyFrom(t),e.maximizeInPlace(r),e}static Distance(t,r){return Math.sqrt(l.DistanceSquared(t,r))}static DistanceSquared(t,r){const e=t.x-r.x,s=t.y-r.y,i=t.z-r.z,n=t.w-r.w;return e*e+s*s+i*i+n*n}static Center(t,r){return l.CenterToRef(t,r,l.Zero())}static CenterToRef(t,r,e){return e.copyFromFloats((t.x+r.x)/2,(t.y+r.y)/2,(t.z+r.z)/2,(t.w+r.w)/2)}static TransformCoordinates(t,r){const e=l.Zero();return l.TransformCoordinatesToRef(t,r,e),e}static TransformCoordinatesToRef(t,r,e){return l.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,r,e),e}static TransformCoordinatesFromFloatsToRef(t,r,e,s,i){const n=s.m,o=t*n[0]+r*n[4]+e*n[8]+n[12],a=t*n[1]+r*n[5]+e*n[9]+n[13],h=t*n[2]+r*n[6]+e*n[10]+n[14],c=t*n[3]+r*n[7]+e*n[11]+n[15];return i.x=o,i.y=a,i.z=h,i.w=c,i}static TransformNormal(t,r){const e=new t.constructor;return l.TransformNormalToRef(t,r,e),e}static TransformNormalToRef(t,r,e){const s=r.m,i=t.x*s[0]+t.y*s[4]+t.z*s[8],n=t.x*s[1]+t.y*s[5]+t.z*s[9],o=t.x*s[2]+t.y*s[6]+t.z*s[10];return e.x=i,e.y=n,e.z=o,e.w=t.w,e}static TransformNormalFromFloatsToRef(t,r,e,s,i,n){const o=i.m;return n.x=t*o[0]+r*o[4]+e*o[8],n.y=t*o[1]+r*o[5]+e*o[9],n.z=t*o[2]+r*o[6]+e*o[10],n.w=s,n}static FromVector3(t,r=0){return new l(t._x,t._y,t._z,r)}}l._ZeroReadOnly=l.Zero();class y{get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}get w(){return this._w}set w(t){this._w=t,this._isDirty=!0}constructor(t=0,r=0,e=0,s=1){this._isDirty=!0,this._x=t,this._y=r,this._z=e,this._w=s}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z} W: ${this._w}}`}getClassName(){return"Quaternion"}getHashCode(){let t=c(this._x);return t=397*t^c(this._y),t=397*t^c(this._z),t=397*t^c(this._w),t}asArray(){return[this._x,this._y,this._z,this._w]}toArray(t,r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,this}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w}equalsWithEpsilon(t,r=i.kn){return t&&s.R.WithinEpsilon(this._x,t._x,r)&&s.R.WithinEpsilon(this._y,t._y,r)&&s.R.WithinEpsilon(this._z,t._z,r)&&s.R.WithinEpsilon(this._w,t._w,r)}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copyFrom(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this._isDirty=!0,this}copyFromFloats(t,r,e,s){return this._x=t,this._y=r,this._z=e,this._w=s,this._isDirty=!0,this}set(t,r,e,s){return this.copyFromFloats(t,r,e,s)}add(t){return new this.constructor(this._x+t._x,this._y+t._y,this._z+t._z,this._w+t._w)}addInPlace(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this._isDirty=!0,this}subtract(t){return new this.constructor(this._x-t._x,this._y-t._y,this._z-t._z,this._w-t._w)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this._isDirty=!0,this}scale(t){return new this.constructor(this._x*t,this._y*t,this._z*t,this._w*t)}scaleToRef(t,r){return r._x=this._x*t,r._y=this._y*t,r._z=this._z*t,r._w=this._w*t,r._isDirty=!0,r}scaleInPlace(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this._isDirty=!0,this}scaleAndAddToRef(t,r){return r._x+=this._x*t,r._y+=this._y*t,r._z+=this._z*t,r._w+=this._w*t,r._isDirty=!0,r}multiply(t){const r=new this.constructor(0,0,0,1);return this.multiplyToRef(t,r),r}multiplyToRef(t,r){const e=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,s=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,i=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,n=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return r.copyFromFloats(e,s,i,n),r}multiplyInPlace(t){return this.multiplyToRef(t,this),this}conjugateToRef(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),t}conjugateInPlace(){return this._x*=-1,this._y*=-1,this._z*=-1,this._isDirty=!0,this}conjugate(){return new this.constructor(-this._x,-this._y,-this._z,this._w)}invert(){const t=this.conjugate(),r=this.lengthSquared();return 0==r||1==r||t.scaleInPlace(1/r),t}invertInPlace(){this.conjugateInPlace();const t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this.lengthSquared())}normalize(){const t=this.length();if(0===t)return this;const r=1/t;return this.scaleInPlace(r),this}normalizeToNew(){const t=this.length();if(0===t)return this.clone();const r=1/t;return this.scale(r)}toEulerAngles(){const t=u.Zero();return this.toEulerAnglesToRef(t),t}toEulerAnglesToRef(t){const r=this._z,e=this._x,s=this._y,i=this._w,n=s*r-e*i,o=.4999999;if(n<-o)t._y=2*Math.atan2(s,i),t._x=Math.PI/2,t._z=0,t._isDirty=!0;else if(n>o)t._y=2*Math.atan2(s,i),t._x=-Math.PI/2,t._z=0,t._isDirty=!0;else{const o=i*i,a=r*r,h=e*e,c=s*s;t._z=Math.atan2(2*(e*s+r*i),-a-h+c+o),t._x=Math.asin(-2*n),t._y=Math.atan2(2*(r*e+s*i),a-h-c+o),t._isDirty=!0}return t}toRotationMatrix(t){return m.FromQuaternionToRef(this,t),t}fromRotationMatrix(t){return y.FromRotationMatrixToRef(t,this),this}static FromRotationMatrix(t){const r=new y;return y.FromRotationMatrixToRef(t,r),r}static FromRotationMatrixToRef(t,r){const e=t.m,s=e[0],i=e[4],n=e[8],o=e[1],a=e[5],h=e[9],c=e[2],_=e[6],u=e[10],l=s+a+u;let y;return l>0?(y=.5/Math.sqrt(l+1),r._w=.25/y,r._x=(_-h)*y,r._y=(n-c)*y,r._z=(o-i)*y,r._isDirty=!0):s>a&&s>u?(y=2*Math.sqrt(1+s-a-u),r._w=(_-h)/y,r._x=.25*y,r._y=(i+o)/y,r._z=(n+c)/y,r._isDirty=!0):a>u?(y=2*Math.sqrt(1+a-s-u),r._w=(n-c)/y,r._x=(i+o)/y,r._y=.25*y,r._z=(h+_)/y,r._isDirty=!0):(y=2*Math.sqrt(1+u-s-a),r._w=(o-i)/y,r._x=(n+c)/y,r._y=(h+_)/y,r._z=.25*y,r._isDirty=!0),r}static Dot(t,r){return t._x*r._x+t._y*r._y+t._z*r._z+t._w*r._w}static AreClose(t,r,e=.1){const s=y.Dot(t,r);return 1-s*s<=e}static SmoothToRef(t,r,e,i,n){let o=0===i?1:e/i;return o=s.R.Clamp(o,0,1),y.SlerpToRef(t,r,o,n),n}static Zero(){return new y(0,0,0,0)}static Inverse(t){return new t.constructor(-t._x,-t._y,-t._z,t._w)}static InverseToRef(t,r){return r.set(-t._x,-t._y,-t._z,t._w),r}static Identity(){return new y(0,0,0,1)}static IsIdentity(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w}static RotationAxis(t,r){return y.RotationAxisToRef(t,r,new y)}static RotationAxisToRef(t,r,e){const s=Math.sin(r/2);return t.normalize(),e._w=Math.cos(r/2),e._x=t._x*s,e._y=t._y*s,e._z=t._z*s,e._isDirty=!0,e}static FromArray(t,r){return r||(r=0),new y(t[r],t[r+1],t[r+2],t[r+3])}static FromArrayToRef(t,r,e){return e._x=t[r],e._y=t[r+1],e._z=t[r+2],e._w=t[r+3],e._isDirty=!0,e}static FromEulerAngles(t,r,e){const s=new y;return y.RotationYawPitchRollToRef(r,t,e,s),s}static FromEulerAnglesToRef(t,r,e,s){return y.RotationYawPitchRollToRef(r,t,e,s),s}static FromEulerVector(t){const r=new y;return y.RotationYawPitchRollToRef(t._y,t._x,t._z,r),r}static FromEulerVectorToRef(t,r){return y.RotationYawPitchRollToRef(t._y,t._x,t._z,r),r}static FromUnitVectorsToRef(t,r,e){const s=u.Dot(t,r)+1;return s<i.kn?Math.abs(t.x)>Math.abs(t.z)?e.set(-t.y,t.x,0,0):e.set(0,-t.z,t.y,0):(u.CrossToRef(t,r,x.Vector3[0]),e.set(x.Vector3[0].x,x.Vector3[0].y,x.Vector3[0].z,s)),e.normalize()}static RotationYawPitchRoll(t,r,e){const s=new y;return y.RotationYawPitchRollToRef(t,r,e,s),s}static RotationYawPitchRollToRef(t,r,e,s){const i=.5*e,n=.5*r,o=.5*t,a=Math.sin(i),h=Math.cos(i),c=Math.sin(n),_=Math.cos(n),u=Math.sin(o),l=Math.cos(o);return s._x=l*c*h+u*_*a,s._y=u*_*h-l*c*a,s._z=l*_*a-u*c*h,s._w=l*_*h+u*c*a,s._isDirty=!0,s}static RotationAlphaBetaGamma(t,r,e){const s=new y;return y.RotationAlphaBetaGammaToRef(t,r,e,s),s}static RotationAlphaBetaGammaToRef(t,r,e,s){const i=.5*(e+t),n=.5*(e-t),o=.5*r;return s._x=Math.cos(n)*Math.sin(o),s._y=Math.sin(n)*Math.sin(o),s._z=Math.sin(i)*Math.cos(o),s._w=Math.cos(i)*Math.cos(o),s._isDirty=!0,s}static RotationQuaternionFromAxis(t,r,e){const s=new y(0,0,0,0);return y.RotationQuaternionFromAxisToRef(t,r,e,s),s}static RotationQuaternionFromAxisToRef(t,r,e,s){const i=d.Matrix[0];return m.FromXYZAxesToRef(t.normalize(),r.normalize(),e.normalize(),i),y.FromRotationMatrixToRef(i,s),s}static FromLookDirectionLH(t,r){const e=new y;return y.FromLookDirectionLHToRef(t,r,e),e}static FromLookDirectionLHToRef(t,r,e){const s=d.Matrix[0];return m.LookDirectionLHToRef(t,r,s),y.FromRotationMatrixToRef(s,e),e}static FromLookDirectionRH(t,r){const e=new y;return y.FromLookDirectionRHToRef(t,r,e),e}static FromLookDirectionRHToRef(t,r,e){const s=d.Matrix[0];return m.LookDirectionRHToRef(t,r,s),y.FromRotationMatrixToRef(s,e)}static Slerp(t,r,e){const s=y.Identity();return y.SlerpToRef(t,r,e,s),s}static SlerpToRef(t,r,e,s){let i,n,o=t._x*r._x+t._y*r._y+t._z*r._z+t._w*r._w,a=!1;if(o<0&&(a=!0,o=-o),o>.999999)n=1-e,i=a?-e:e;else{const t=Math.acos(o),r=1/Math.sin(t);n=Math.sin((1-e)*t)*r,i=a?-Math.sin(e*t)*r:Math.sin(e*t)*r}return s._x=n*t._x+i*r._x,s._y=n*t._y+i*r._y,s._z=n*t._z+i*r._z,s._w=n*t._w+i*r._w,s._isDirty=!0,s}static Hermite(t,r,e,s,i){const n=i*i,o=i*n,a=2*o-3*n+1,h=-2*o+3*n,c=o-2*n+i,_=o-n,u=t._x*a+e._x*h+r._x*c+s._x*_,l=t._y*a+e._y*h+r._y*c+s._y*_,y=t._z*a+e._z*h+r._z*c+s._z*_,m=t._w*a+e._w*h+r._w*c+s._w*_;return new t.constructor(u,l,y,m)}static Hermite1stDerivative(t,r,e,s,i){const n=new t.constructor;return this.Hermite1stDerivativeToRef(t,r,e,s,i,n),n}static Hermite1stDerivativeToRef(t,r,e,s,i,n){const o=i*i;return n._x=6*(o-i)*t._x+(3*o-4*i+1)*r._x+6*(-o+i)*e._x+(3*o-2*i)*s._x,n._y=6*(o-i)*t._y+(3*o-4*i+1)*r._y+6*(-o+i)*e._y+(3*o-2*i)*s._y,n._z=6*(o-i)*t._z+(3*o-4*i+1)*r._z+6*(-o+i)*e._z+(3*o-2*i)*s._z,n._w=6*(o-i)*t._w+(3*o-4*i+1)*r._w+6*(-o+i)*e._w+(3*o-2*i)*s._w,n._isDirty=!0,n}}class m{static get Use64Bits(){return a.Z.MatrixUse64Bits}get m(){return this._m}markAsUpdated(){this.updateFlag=m._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}_updateIdentityStatus(t,r=!1,e=!1,s=!0){this._isIdentity=t,this._isIdentity3x2=t||e,this._isIdentityDirty=!this._isIdentity&&r,this._isIdentity3x2Dirty=!this._isIdentity3x2&&s}constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,a.Z.MatrixTrackPrecisionChange&&a.Z.MatrixTrackedMatrices.push(this),this._m=new a.Z.MatrixCurrentType(16),this.markAsUpdated()}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const t=this._m,r=t[0],e=t[1],s=t[2],i=t[3],n=t[4],o=t[5],a=t[6],h=t[7],c=t[8],_=t[9],u=t[10],l=t[11],y=t[12],m=t[13],d=t[14],x=t[15],f=u*x-d*l,R=_*x-m*l,p=_*d-m*u,w=c*x-y*l,g=c*d-u*y,T=c*m-y*_;return r*+(o*f-a*R+h*p)+e*-(n*f-a*w+h*g)+s*+(n*R-o*w+h*T)+i*-(n*p-o*g+a*T)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return m.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(t){const r=new this.constructor;return this.addToRef(t,r),r}addToRef(t,r){const e=this._m,s=r._m,i=t.m;for(let t=0;t<16;t++)s[t]=e[t]+i[t];return r.markAsUpdated(),r}addToSelf(t){const r=this._m,e=t.m;for(let t=0;t<16;t++)r[t]+=e[t];return this.markAsUpdated(),this}invertToRef(t){if(!0===this._isIdentity)return m.IdentityToRef(t),t;const r=this._m,e=r[0],s=r[1],i=r[2],n=r[3],o=r[4],a=r[5],h=r[6],c=r[7],_=r[8],u=r[9],l=r[10],y=r[11],d=r[12],x=r[13],f=r[14],R=r[15],p=l*R-f*y,w=u*R-x*y,g=u*f-x*l,T=_*R-d*y,z=_*f-l*d,F=_*x-d*u,M=+(a*p-h*w+c*g),b=-(o*p-h*T+c*z),P=+(o*w-a*T+c*F),A=-(o*g-a*z+h*F),I=e*M+s*b+i*P+n*A;if(0===I)return t.copyFrom(this),t;const v=1/I,D=h*R-f*c,C=a*R-x*c,V=a*f-x*h,L=o*R-d*c,k=o*f-d*h,O=o*x-d*a,H=h*y-l*c,S=a*y-u*c,B=a*l-u*h,N=o*y-_*c,U=o*l-_*h,Z=o*u-_*a,q=-(s*p-i*w+n*g),E=+(e*p-i*T+n*z),W=-(e*w-s*T+n*F),G=+(e*g-s*z+i*F),Y=+(s*D-i*C+n*V),Q=-(e*D-i*L+n*k),j=+(e*C-s*L+n*O),$=-(e*V-s*k+i*O),X=-(s*H-i*S+n*B),J=+(e*H-i*N+n*U),K=-(e*S-s*N+n*Z),tt=+(e*B-s*U+i*Z);return m.FromValuesToRef(M*v,q*v,Y*v,X*v,b*v,E*v,Q*v,J*v,P*v,W*v,j*v,K*v,A*v,G*v,$*v,tt*v,t),t}addAtIndex(t,r){return this._m[t]+=r,this.markAsUpdated(),this}multiplyAtIndex(t,r){return this._m[t]*=r,this.markAsUpdated(),this}setTranslationFromFloats(t,r,e){return this._m[12]=t,this._m[13]=r,this._m[14]=e,this.markAsUpdated(),this}addTranslationFromFloats(t,r,e){return this._m[12]+=t,this._m[13]+=r,this._m[14]+=e,this.markAsUpdated(),this}setTranslation(t){return this.setTranslationFromFloats(t._x,t._y,t._z)}getTranslation(){return new u(this._m[12],this._m[13],this._m[14])}getTranslationToRef(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],t}removeRotationAndScaling(){const t=this.m;return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this}multiply(t){const r=new this.constructor;return this.multiplyToRef(t,r),r}copyFrom(t){t.copyToArray(this._m);const r=t;return this.updateFlag=r.updateFlag,this._updateIdentityStatus(r._isIdentity,r._isIdentityDirty,r._isIdentity3x2,r._isIdentity3x2Dirty),this}copyToArray(t,r=0){const e=this._m;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],t[r+9]=e[9],t[r+10]=e[10],t[r+11]=e[11],t[r+12]=e[12],t[r+13]=e[13],t[r+14]=e[14],t[r+15]=e[15],this}multiplyToRef(t,r){return this._isIdentity?(r.copyFrom(t),r):t._isIdentity?(r.copyFrom(this),r):(this.multiplyToArray(t,r._m,0),r.markAsUpdated(),r)}multiplyToArray(t,r,e){const s=this._m,i=t.m,n=s[0],o=s[1],a=s[2],h=s[3],c=s[4],_=s[5],u=s[6],l=s[7],y=s[8],m=s[9],d=s[10],x=s[11],f=s[12],R=s[13],p=s[14],w=s[15],g=i[0],T=i[1],z=i[2],F=i[3],M=i[4],b=i[5],P=i[6],A=i[7],I=i[8],v=i[9],D=i[10],C=i[11],V=i[12],L=i[13],k=i[14],O=i[15];return r[e]=n*g+o*M+a*I+h*V,r[e+1]=n*T+o*b+a*v+h*L,r[e+2]=n*z+o*P+a*D+h*k,r[e+3]=n*F+o*A+a*C+h*O,r[e+4]=c*g+_*M+u*I+l*V,r[e+5]=c*T+_*b+u*v+l*L,r[e+6]=c*z+_*P+u*D+l*k,r[e+7]=c*F+_*A+u*C+l*O,r[e+8]=y*g+m*M+d*I+x*V,r[e+9]=y*T+m*b+d*v+x*L,r[e+10]=y*z+m*P+d*D+x*k,r[e+11]=y*F+m*A+d*C+x*O,r[e+12]=f*g+R*M+p*I+w*V,r[e+13]=f*T+R*b+p*v+w*L,r[e+14]=f*z+R*P+p*D+w*k,r[e+15]=f*F+R*A+p*C+w*O,this}equals(t){const r=t;if(!r)return!1;if((this._isIdentity||r._isIdentity)&&!this._isIdentityDirty&&!r._isIdentityDirty)return this._isIdentity&&r._isIdentity;const e=this.m,s=r.m;return e[0]===s[0]&&e[1]===s[1]&&e[2]===s[2]&&e[3]===s[3]&&e[4]===s[4]&&e[5]===s[5]&&e[6]===s[6]&&e[7]===s[7]&&e[8]===s[8]&&e[9]===s[9]&&e[10]===s[10]&&e[11]===s[11]&&e[12]===s[12]&&e[13]===s[13]&&e[14]===s[14]&&e[15]===s[15]}clone(){const t=new this.constructor;return t.copyFrom(this),t}getClassName(){return"Matrix"}getHashCode(){let t=c(this._m[0]);for(let r=1;r<16;r++)t=397*t^c(this._m[r]);return t}decomposeToTransformNode(t){return t.rotationQuaternion=t.rotationQuaternion||new y,this.decompose(t.scaling,t.rotationQuaternion,t.position)}decompose(t,r,e,s){if(this._isIdentity)return e&&e.setAll(0),t&&t.setAll(1),r&&r.copyFromFloats(0,0,0,1),!0;const i=this._m;if(e&&e.copyFromFloats(i[12],i[13],i[14]),(t=t||d.Vector3[0]).x=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),t.y=Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),t.z=Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]),s){const r=s.scaling.x<0?-1:1,e=s.scaling.y<0?-1:1,i=s.scaling.z<0?-1:1;t.x*=r,t.y*=e,t.z*=i}else this.determinant()<=0&&(t.y*=-1);if(0===t._x||0===t._y||0===t._z)return r&&r.copyFromFloats(0,0,0,1),!1;if(r){const e=1/t._x,s=1/t._y,n=1/t._z;m.FromValuesToRef(i[0]*e,i[1]*e,i[2]*e,0,i[4]*s,i[5]*s,i[6]*s,0,i[8]*n,i[9]*n,i[10]*n,0,0,0,0,1,d.Matrix[0]),y.FromRotationMatrixToRef(d.Matrix[0],r)}return!0}getRow(t){if(t<0||t>3)return null;const r=4*t;return new l(this._m[r+0],this._m[r+1],this._m[r+2],this._m[r+3])}getRowToRef(t,r){if(t>=0&&t<3){const e=4*t;r.x=this._m[e+0],r.y=this._m[e+1],r.z=this._m[e+2],r.w=this._m[e+3]}return r}setRow(t,r){return this.setRowFromFloats(t,r.x,r.y,r.z,r.w)}transpose(){const t=new this.constructor;return m.TransposeToRef(this,t),t}transposeToRef(t){return m.TransposeToRef(this,t),t}setRowFromFloats(t,r,e,s,i){if(t<0||t>3)return this;const n=4*t;return this._m[n+0]=r,this._m[n+1]=e,this._m[n+2]=s,this._m[n+3]=i,this.markAsUpdated(),this}scale(t){const r=new this.constructor;return this.scaleToRef(t,r),r}scaleToRef(t,r){for(let e=0;e<16;e++)r._m[e]=this._m[e]*t;return r.markAsUpdated(),r}scaleAndAddToRef(t,r){for(let e=0;e<16;e++)r._m[e]+=this._m[e]*t;return r.markAsUpdated(),r}toNormalMatrix(t){const r=d.Matrix[0];this.invertToRef(r),r.transposeToRef(t);const e=t._m;return m.FromValuesToRef(e[0],e[1],e[2],0,e[4],e[5],e[6],0,e[8],e[9],e[10],0,0,0,0,1,t),t}getRotationMatrix(){const t=new this.constructor;return this.getRotationMatrixToRef(t),t}getRotationMatrixToRef(t){const r=d.Vector3[0];if(!this.decompose(r))return m.IdentityToRef(t),t;const e=this._m,s=1/r._x,i=1/r._y,n=1/r._z;return m.FromValuesToRef(e[0]*s,e[1]*s,e[2]*s,0,e[4]*i,e[5]*i,e[6]*i,0,e[8]*n,e[9]*n,e[10]*n,0,0,0,0,1,t),t}toggleModelMatrixHandInPlace(){const t=this._m;return t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated(),this}toggleProjectionMatrixHandInPlace(){const t=this._m;return t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated(),this}static FromArray(t,r=0){const e=new m;return m.FromArrayToRef(t,r,e),e}static FromArrayToRef(t,r,e){for(let s=0;s<16;s++)e._m[s]=t[s+r];return e.markAsUpdated(),e}static FromFloat32ArrayToRefScaled(t,r,e,s){for(let i=0;i<16;i++)s._m[i]=t[i+r]*e;return s.markAsUpdated(),s}static get IdentityReadOnly(){return m._IdentityReadOnly}static FromValuesToRef(t,r,e,s,i,n,o,a,h,c,_,u,l,y,m,d,x){const f=x._m;f[0]=t,f[1]=r,f[2]=e,f[3]=s,f[4]=i,f[5]=n,f[6]=o,f[7]=a,f[8]=h,f[9]=c,f[10]=_,f[11]=u,f[12]=l,f[13]=y,f[14]=m,f[15]=d,x.markAsUpdated()}static FromValues(t,r,e,s,i,n,o,a,h,c,_,u,l,y,d,x){const f=new m,R=f._m;return R[0]=t,R[1]=r,R[2]=e,R[3]=s,R[4]=i,R[5]=n,R[6]=o,R[7]=a,R[8]=h,R[9]=c,R[10]=_,R[11]=u,R[12]=l,R[13]=y,R[14]=d,R[15]=x,f.markAsUpdated(),f}static Compose(t,r,e){const s=new m;return m.ComposeToRef(t,r,e,s),s}static ComposeToRef(t,r,e,s){const i=s._m,n=r._x,o=r._y,a=r._z,h=r._w,c=n+n,_=o+o,u=a+a,l=n*c,y=n*_,m=n*u,d=o*_,x=o*u,f=a*u,R=h*c,p=h*_,w=h*u,g=t._x,T=t._y,z=t._z;return i[0]=(1-(d+f))*g,i[1]=(y+w)*g,i[2]=(m-p)*g,i[3]=0,i[4]=(y-w)*T,i[5]=(1-(l+f))*T,i[6]=(x+R)*T,i[7]=0,i[8]=(m+p)*z,i[9]=(x-R)*z,i[10]=(1-(l+d))*z,i[11]=0,i[12]=e._x,i[13]=e._y,i[14]=e._z,i[15]=1,s.markAsUpdated(),s}static Identity(){const t=m.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t}static IdentityToRef(t){return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0),t}static Zero(){const t=m.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t}static RotationX(t){const r=new m;return m.RotationXToRef(t,r),r}static Invert(t){const r=new t.constructor;return t.invertToRef(r),r}static RotationXToRef(t,r){const e=Math.sin(t),s=Math.cos(t);return m.FromValuesToRef(1,0,0,0,0,s,e,0,0,-e,s,0,0,0,0,1,r),r._updateIdentityStatus(1===s&&0===e),r}static RotationY(t){const r=new m;return m.RotationYToRef(t,r),r}static RotationYToRef(t,r){const e=Math.sin(t),s=Math.cos(t);return m.FromValuesToRef(s,0,-e,0,0,1,0,0,e,0,s,0,0,0,0,1,r),r._updateIdentityStatus(1===s&&0===e),r}static RotationZ(t){const r=new m;return m.RotationZToRef(t,r),r}static RotationZToRef(t,r){const e=Math.sin(t),s=Math.cos(t);return m.FromValuesToRef(s,e,0,0,-e,s,0,0,0,0,1,0,0,0,0,1,r),r._updateIdentityStatus(1===s&&0===e),r}static RotationAxis(t,r){const e=new m;return m.RotationAxisToRef(t,r,e),e}static RotationAxisToRef(t,r,e){const s=Math.sin(-r),i=Math.cos(-r),n=1-i;t.normalize();const o=e._m;return o[0]=t._x*t._x*n+i,o[1]=t._x*t._y*n-t._z*s,o[2]=t._x*t._z*n+t._y*s,o[3]=0,o[4]=t._y*t._x*n+t._z*s,o[5]=t._y*t._y*n+i,o[6]=t._y*t._z*n-t._x*s,o[7]=0,o[8]=t._z*t._x*n-t._y*s,o[9]=t._z*t._y*n+t._x*s,o[10]=t._z*t._z*n+i,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,e.markAsUpdated(),e}static RotationAlignToRef(t,r,e){const s=u.Dot(r,t),n=e._m;if(s<-1+i.kn)n[0]=-1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0;else{const e=u.Cross(r,t),i=1/(1+s);n[0]=e._x*e._x*i+s,n[1]=e._y*e._x*i-e._z,n[2]=e._z*e._x*i+e._y,n[3]=0,n[4]=e._x*e._y*i+e._z,n[5]=e._y*e._y*i+s,n[6]=e._z*e._y*i-e._x,n[7]=0,n[8]=e._x*e._z*i-e._y,n[9]=e._y*e._z*i+e._x,n[10]=e._z*e._z*i+s,n[11]=0}return n[12]=0,n[13]=0,n[14]=0,n[15]=1,e.markAsUpdated(),e}static RotationYawPitchRoll(t,r,e){const s=new m;return m.RotationYawPitchRollToRef(t,r,e,s),s}static RotationYawPitchRollToRef(t,r,e,s){return y.RotationYawPitchRollToRef(t,r,e,d.Quaternion[0]),d.Quaternion[0].toRotationMatrix(s),s}static Scaling(t,r,e){const s=new m;return m.ScalingToRef(t,r,e,s),s}static ScalingToRef(t,r,e,s){return m.FromValuesToRef(t,0,0,0,0,r,0,0,0,0,e,0,0,0,0,1,s),s._updateIdentityStatus(1===t&&1===r&&1===e),s}static Translation(t,r,e){const s=new m;return m.TranslationToRef(t,r,e,s),s}static TranslationToRef(t,r,e,s){return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,r,e,1,s),s._updateIdentityStatus(0===t&&0===r&&0===e),s}static Lerp(t,r,e){const s=new t.constructor;return m.LerpToRef(t,r,e,s),s}static LerpToRef(t,r,e,s){const i=s._m,n=t.m,o=r.m;for(let t=0;t<16;t++)i[t]=n[t]*(1-e)+o[t]*e;return s.markAsUpdated(),s}static DecomposeLerp(t,r,e){const s=new t.constructor;return m.DecomposeLerpToRef(t,r,e,s),s}static DecomposeLerpToRef(t,r,e,s){const i=d.Vector3[0],n=d.Quaternion[0],o=d.Vector3[1];t.decompose(i,n,o);const a=d.Vector3[2],h=d.Quaternion[1],c=d.Vector3[3];r.decompose(a,h,c);const _=d.Vector3[4];u.LerpToRef(i,a,e,_);const l=d.Quaternion[2];y.SlerpToRef(n,h,e,l);const x=d.Vector3[5];return u.LerpToRef(o,c,e,x),m.ComposeToRef(_,l,x,s),s}static LookAtLH(t,r,e){const s=new m;return m.LookAtLHToRef(t,r,e,s),s}static LookAtLHToRef(t,r,e,s){const i=d.Vector3[0],n=d.Vector3[1],o=d.Vector3[2];r.subtractToRef(t,o),o.normalize(),u.CrossToRef(e,o,i);const a=i.lengthSquared();0===a?i.x=1:i.normalizeFromLength(Math.sqrt(a)),u.CrossToRef(o,i,n),n.normalize();const h=-u.Dot(i,t),c=-u.Dot(n,t),_=-u.Dot(o,t);m.FromValuesToRef(i._x,n._x,o._x,0,i._y,n._y,o._y,0,i._z,n._z,o._z,0,h,c,_,1,s)}static LookAtRH(t,r,e){const s=new m;return m.LookAtRHToRef(t,r,e,s),s}static LookAtRHToRef(t,r,e,s){const i=d.Vector3[0],n=d.Vector3[1],o=d.Vector3[2];t.subtractToRef(r,o),o.normalize(),u.CrossToRef(e,o,i);const a=i.lengthSquared();0===a?i.x=1:i.normalizeFromLength(Math.sqrt(a)),u.CrossToRef(o,i,n),n.normalize();const h=-u.Dot(i,t),c=-u.Dot(n,t),_=-u.Dot(o,t);return m.FromValuesToRef(i._x,n._x,o._x,0,i._y,n._y,o._y,0,i._z,n._z,o._z,0,h,c,_,1,s),s}static LookDirectionLH(t,r){const e=new m;return m.LookDirectionLHToRef(t,r,e),e}static LookDirectionLHToRef(t,r,e){const s=d.Vector3[0];s.copyFrom(t),s.scaleInPlace(-1);const i=d.Vector3[1];return u.CrossToRef(r,s,i),m.FromValuesToRef(i._x,i._y,i._z,0,r._x,r._y,r._z,0,s._x,s._y,s._z,0,0,0,0,1,e),e}static LookDirectionRH(t,r){const e=new m;return m.LookDirectionRHToRef(t,r,e),e}static LookDirectionRHToRef(t,r,e){const s=d.Vector3[2];return u.CrossToRef(r,t,s),m.FromValuesToRef(s._x,s._y,s._z,0,r._x,r._y,r._z,0,t._x,t._y,t._z,0,0,0,0,1,e),e}static OrthoLH(t,r,e,s,i){const n=new m;return m.OrthoLHToRef(t,r,e,s,n,i),n}static OrthoLHToRef(t,r,e,s,i,n){const o=2/t,a=2/r,h=2/(s-e),c=-(s+e)/(s-e);return m.FromValuesToRef(o,0,0,0,0,a,0,0,0,0,h,0,0,0,c,1,i),n&&i.multiplyToRef(f,i),i._updateIdentityStatus(1===o&&1===a&&1===h&&0===c),i}static OrthoOffCenterLH(t,r,e,s,i,n,o){const a=new m;return m.OrthoOffCenterLHToRef(t,r,e,s,i,n,a,o),a}static OrthoOffCenterLHToRef(t,r,e,s,i,n,o,a){const h=2/(r-t),c=2/(s-e),_=2/(n-i),u=-(n+i)/(n-i),l=(t+r)/(t-r),y=(s+e)/(e-s);return m.FromValuesToRef(h,0,0,0,0,c,0,0,0,0,_,0,l,y,u,1,o),a&&o.multiplyToRef(f,o),o.markAsUpdated(),o}static OrthoOffCenterRH(t,r,e,s,i,n,o){const a=new m;return m.OrthoOffCenterRHToRef(t,r,e,s,i,n,a,o),a}static OrthoOffCenterRHToRef(t,r,e,s,i,n,o,a){return m.OrthoOffCenterLHToRef(t,r,e,s,i,n,o,a),o._m[10]*=-1,o}static PerspectiveLH(t,r,e,s,i,n=0){const o=new m,a=2*e/t,h=2*e/r,c=(s+e)/(s-e),_=-2*s*e/(s-e),u=Math.tan(n);return m.FromValuesToRef(a,0,0,0,0,h,0,u,0,0,c,1,0,0,_,0,o),i&&o.multiplyToRef(f,o),o._updateIdentityStatus(!1),o}static PerspectiveFovLH(t,r,e,s,i,n=0,o=!1){const a=new m;return m.PerspectiveFovLHToRef(t,r,e,s,a,!0,i,n,o),a}static PerspectiveFovLHToRef(t,r,e,s,i,n=!0,o,a=0,h=!1){const c=e,_=s,u=1/Math.tan(.5*t),l=n?u/r:u,y=n?u:u*r,d=h&&0===c?-1:0!==_?(_+c)/(_-c):1,x=h&&0===c?2*_:0!==_?-2*_*c/(_-c):-2*c,R=Math.tan(a);return m.FromValuesToRef(l,0,0,0,0,y,0,R,0,0,d,1,0,0,x,0,i),o&&i.multiplyToRef(f,i),i._updateIdentityStatus(!1),i}static PerspectiveFovReverseLHToRef(t,r,e,s,i,n=!0,o,a=0){const h=1/Math.tan(.5*t),c=n?h/r:h,_=n?h:h*r,u=Math.tan(a);return m.FromValuesToRef(c,0,0,0,0,_,0,u,0,0,-e,1,0,0,1,0,i),o&&i.multiplyToRef(f,i),i._updateIdentityStatus(!1),i}static PerspectiveFovRH(t,r,e,s,i,n=0,o=!1){const a=new m;return m.PerspectiveFovRHToRef(t,r,e,s,a,!0,i,n,o),a}static PerspectiveFovRHToRef(t,r,e,s,i,n=!0,o,a=0,h=!1){const c=e,_=s,u=1/Math.tan(.5*t),l=n?u/r:u,y=n?u:u*r,d=h&&0===c?1:0!==_?-(_+c)/(_-c):-1,x=h&&0===c?2*_:0!==_?-2*_*c/(_-c):-2*c,R=Math.tan(a);return m.FromValuesToRef(l,0,0,0,0,y,0,R,0,0,d,-1,0,0,x,0,i),o&&i.multiplyToRef(f,i),i._updateIdentityStatus(!1),i}static PerspectiveFovReverseRHToRef(t,r,e,s,i,n=!0,o,a=0){const h=1/Math.tan(.5*t),c=n?h/r:h,_=n?h:h*r,u=Math.tan(a);return m.FromValuesToRef(c,0,0,0,0,_,0,u,0,0,-e,-1,0,0,-1,0,i),o&&i.multiplyToRef(f,i),i._updateIdentityStatus(!1),i}static PerspectiveFovWebVRToRef(t,r,e,s,i=!1,n,o=0){const a=i?-1:1,h=Math.tan(t.upDegrees*Math.PI/180),c=Math.tan(t.downDegrees*Math.PI/180),_=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),l=2/(_+u),y=2/(h+c),m=Math.tan(o),d=s._m;return d[0]=l,d[1]=d[2]=d[3]=d[4]=0,d[5]=y,d[6]=0,d[7]=m,d[8]=(_-u)*l*.5,d[9]=-(h-c)*y*.5,d[10]=-e/(r-e),d[11]=1*a,d[12]=d[13]=d[15]=0,d[14]=-2*e*r/(e-r),n&&s.multiplyToRef(f,s),s.markAsUpdated(),s}static GetFinalMatrix(t,r,e,s,i,n){const o=t.width,a=t.height,h=t.x,c=t.y,_=m.FromValues(o/2,0,0,0,0,-a/2,0,0,0,0,n-i,0,h+o/2,a/2+c,i,1),u=new r.constructor;return r.multiplyToRef(e,u),u.multiplyToRef(s,u),u.multiplyToRef(_,u)}static GetAsMatrix2x2(t){const r=t.m,e=[r[0],r[1],r[4],r[5]];return a.Z.MatrixUse64Bits?e:new Float32Array(e)}static GetAsMatrix3x3(t){const r=t.m,e=[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]];return a.Z.MatrixUse64Bits?e:new Float32Array(e)}static Transpose(t){const r=new t.constructor;return m.TransposeToRef(t,r),r}static TransposeToRef(t,r){const e=r._m,s=t.m;return e[0]=s[0],e[1]=s[4],e[2]=s[8],e[3]=s[12],e[4]=s[1],e[5]=s[5],e[6]=s[9],e[7]=s[13],e[8]=s[2],e[9]=s[6],e[10]=s[10],e[11]=s[14],e[12]=s[3],e[13]=s[7],e[14]=s[11],e[15]=s[15],r.markAsUpdated(),r._updateIdentityStatus(t._isIdentity,t._isIdentityDirty),r}static Reflection(t){const r=new m;return m.ReflectionToRef(t,r),r}static ReflectionToRef(t,r){t.normalize();const e=t.normal.x,s=t.normal.y,i=t.normal.z,n=-2*e,o=-2*s,a=-2*i;return m.FromValuesToRef(n*e+1,o*e,a*e,0,n*s,o*s+1,a*s,0,n*i,o*i,a*i+1,0,n*t.d,o*t.d,a*t.d,1,r),r}static FromXYZAxesToRef(t,r,e,s){return m.FromValuesToRef(t._x,t._y,t._z,0,r._x,r._y,r._z,0,e._x,e._y,e._z,0,0,0,0,1,s),s}static FromQuaternionToRef(t,r){const e=t._x*t._x,s=t._y*t._y,i=t._z*t._z,n=t._x*t._y,o=t._z*t._w,a=t._z*t._x,h=t._y*t._w,c=t._y*t._z,_=t._x*t._w;return r._m[0]=1-2*(s+i),r._m[1]=2*(n+o),r._m[2]=2*(a-h),r._m[3]=0,r._m[4]=2*(n-o),r._m[5]=1-2*(i+e),r._m[6]=2*(c+_),r._m[7]=0,r._m[8]=2*(a+h),r._m[9]=2*(c-_),r._m[10]=1-2*(s+e),r._m[11]=0,r._m[12]=0,r._m[13]=0,r._m[14]=0,r._m[15]=1,r.markAsUpdated(),r}}m._UpdateFlagSeed=0,m._IdentityReadOnly=m.Identity();class d{}d.Vector3=n.B.BuildTuple(11,u.Zero),d.Matrix=n.B.BuildTuple(2,m.Identity),d.Quaternion=n.B.BuildTuple(3,y.Zero);class x{}x.Vector2=n.B.BuildTuple(3,_.Zero),x.Vector3=n.B.BuildTuple(13,u.Zero),x.Vector4=n.B.BuildTuple(3,l.Zero),x.Quaternion=n.B.BuildTuple(2,y.Zero),x.Matrix=n.B.BuildTuple(8,m.Identity),(0,o.H)("BABYLON.Vector2",_),(0,o.H)("BABYLON.Vector3",u),(0,o.H)("BABYLON.Vector4",l),(0,o.H)("BABYLON.Matrix",m);const f=m.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)},470:(t,r,e)=>{e.d(r,{l:()=>s});class s{constructor(t,r,e,s){this.x=t,this.y=r,this.width=e,this.height=s}toGlobal(t,r){return new s(this.x*t,this.y*r,this.width*t,this.height*r)}toGlobalToRef(t,r,e){return e.x=this.x*t,e.y=this.y*r,e.width=this.width*t,e.height=this.height*r,this}clone(){return new s(this.x,this.y,this.width,this.height)}}},2554:(t,r,e)=>{e.d(r,{B:()=>s,M:()=>n});class s{static BuildArray(t,r){const e=[];for(let s=0;s<t;++s)e.push(r());return e}static BuildTuple(t,r){return s.BuildArray(t,r)}}const i=["push","splice","pop","shift","unshift"];function n(t,r){const e=i.map((e=>function(t,r,e){const s=t[r];if("function"!=typeof s)return null;const i=function(){const s=t.length,n=i.previous.apply(t,arguments);return e(r,s),n};return s.next=i,i.previous=s,t[r]=i,()=>{const e=i.previous;if(!e)return;const s=i.next;s?(e.next=s,s.previous=e):(e.next=void 0,t[r]=e),i.next=void 0,i.previous=void 0}}(t,e,r)));return()=>{e.forEach((t=>{null==t||t()}))}}},8139:(t,r,e)=>{e.d(r,{y$:()=>n});class s{constructor(t,r=!1,e,s){this.initialize(t,r,e,s)}initialize(t,r=!1,e,s){return this.mask=t,this.skipNextObservers=r,this.target=e,this.currentTarget=s,this}}class i{constructor(t,r,e=null){this.callback=t,this.mask=r,this.scope=e,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1}}class n{static FromPromise(t,r){const e=new n;return t.then((t=>{e.notifyObservers(t)})).catch((t=>{if(!r)throw t;r.notifyObservers(t)})),e}get observers(){return this._observers}constructor(t,r=!1){this.notifyIfTriggered=r,this._observers=new Array,this._numObserversMarkedAsDeleted=0,this._hasNotified=!1,this._eventState=new s(0),t&&(this._onObserverAdded=t)}add(t,r=-1,e=!1,s=null,n=!1){if(!t)return null;const o=new i(t,r,s);return o.unregisterOnNextCall=n,e?this._observers.unshift(o):this._observers.push(o),this._onObserverAdded&&this._onObserverAdded(o),this._hasNotified&&this.notifyIfTriggered&&void 0!==this._lastNotifiedValue&&this.notifyObserver(o,this._lastNotifiedValue),o}addOnce(t){return this.add(t,void 0,void 0,void 0,!0)}remove(t){return!!t&&(-1!==this._observers.indexOf(t)&&(this._deferUnregister(t),!0))}removeCallback(t,r){for(let e=0;e<this._observers.length;e++){const s=this._observers[e];if(!(s._willBeUnregistered||s.callback!==t||r&&r!==s.scope))return this._deferUnregister(s),!0}return!1}_deferUnregister(t){this._numObserversMarkedAsDeleted++,t.unregisterOnNextCall=!1,t._willBeUnregistered=!0,setTimeout((()=>{this._remove(t)}),0)}_remove(t,r=!0){if(!t)return!1;const e=this._observers.indexOf(t);return-1!==e&&(r&&this._numObserversMarkedAsDeleted--,this._observers.splice(e,1),!0)}makeObserverTopPriority(t){this._remove(t,!1),this._observers.unshift(t)}makeObserverBottomPriority(t){this._remove(t,!1),this._observers.push(t)}notifyObservers(t,r=-1,e,s,i){if(this.notifyIfTriggered&&(this._hasNotified=!0,this._lastNotifiedValue=t),!this._observers.length)return!0;const n=this._eventState;n.mask=r,n.target=e,n.currentTarget=s,n.skipNextObservers=!1,n.lastReturnValue=t,n.userInfo=i;for(const e of this._observers)if(!e._willBeUnregistered&&(e.mask&r&&(e.unregisterOnNextCall&&this._deferUnregister(e),e.scope?n.lastReturnValue=e.callback.apply(e.scope,[t,n]):n.lastReturnValue=e.callback(t,n)),n.skipNextObservers))return!1;return!0}notifyObserver(t,r,e=-1){if(this.notifyIfTriggered&&(this._hasNotified=!0,this._lastNotifiedValue=r),t._willBeUnregistered)return;const s=this._eventState;s.mask=e,s.skipNextObservers=!1,t.unregisterOnNextCall&&this._deferUnregister(t),t.callback(r,s)}hasObservers(){return this._observers.length-this._numObserversMarkedAsDeleted>0}clear(){this._observers.length=0,this._onObserverAdded=null,this._numObserversMarkedAsDeleted=0,this.cleanLastNotifiedState()}cleanLastNotifiedState(){this._hasNotified=!1,this._lastNotifiedValue=void 0}clone(){const t=new n;return t._observers=this._observers.slice(0),t}hasSpecificMask(t=-1){for(const r of this._observers)if(r.mask&t||r.mask===t)return!0;return!1}}},646:(t,r,e)=>{e.d(r,{H:()=>i,q:()=>n});const s={};function i(t,r){s[t]=r}function n(t){return s[t]}}},e={};function s(t){var i=e[t];if(void 0!==i)return i.exports;var n=e[t]={exports:{}};return r[t](n,n.exports,s),n.exports}s.m=r,t=[],s.O=(r,e,i,n)=>{if(!e){var o=1/0;for(_=0;_<t.length;_++){for(var[e,i,n]=t[_],a=!0,h=0;h<e.length;h++)(!1&n||o>=n)&&Object.keys(s.O).every((t=>s.O[t](e[h])))?e.splice(h--,1):(a=!1,n<o&&(o=n));if(a){t.splice(_--,1);var c=i();void 0!==c&&(r=c)}}return r}n=n||0;for(var _=t.length;_>0&&t[_-1][2]>n;_--)t[_]=t[_-1];t[_]=[e,i,n]},s.d=(t,r)=>{for(var e in r)s.o(r,e)&&!s.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},s.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),(()=>{var t={592:0};s.O.j=r=>0===t[r];var r=(r,e)=>{var i,n,[o,a,h]=e,c=0;if(o.some((r=>0!==t[r]))){for(i in a)s.o(a,i)&&(s.m[i]=a[i]);if(h)var _=h(s)}for(r&&r(e);c<o.length;c++)n=o[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(_)},e=self.webpackChunkgame=self.webpackChunkgame||[];e.forEach(r.bind(null,0)),e.push=r.bind(null,e.push.bind(e))})();var i=s(4852);i=s.O(i)})();